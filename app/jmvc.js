/*
______________  _____    __________
______  /__   |/  /_ |  / /_  ____/
___ _  /__  /|_/ /__ | / /_  /     
/ /_/ / _  /  / / __ |/ / / /___
\____/  /_/  /_/  _____/  \____/  v.3.8

author: Federico Ghedina - fedeghe@gmail.com
Distributed under MIT license

*/
!function(W,undefined){"use strict";var WD=W.document,WDL=WD.location,WDB=WD.body,JMVC=W.JMVC=function(){!function(e){function t(e,t){t=t||"",JMVC.debug("ERROR: "+t+" ["+e.toString()+"]\n\nName:\t\t"+(e.name||"-")+"\nMessage:\t"+(e.message||"-")+"\nFile:\t\t\t"+(e.fileName||"-")+"\nSource:\t\t"+(e.toSource&&e.toSource()||"-")+"\nLine #:\t\t"+(e.lineNumber||"-")+"\nColumn #:\t"+(e.columnNumber||"-")+"\n\nStack:\n\n"+(e.stack||"-"))}window.onerror=function(e,n,r,o,i){try{i.message=i.message||e||null,i.fileName=i.fileName||n||null,i.lineNumber=i.lineNumber||r||null,i.columnNumber=i.columnNumber||o||null}catch(e){}t(i,"Uncatched Exception"),JMVC.Errors.notify(i)}}(W.onerror);var e,t,n,r,o,i,a,s,c,u,l,d,f,p,m,h=+new Date,g={},v="/",y=WDL.protocol+v+v+"www.jmvc.dev",C=WDL.protocol+v+v+"www.jmvc.org",M=WDL.protocol+v+v+"static.jmvc.dev",b=WDL.protocol+v+v+"static.jmvc.org",J={ext:"/app/extensions/",test:"/app/testsuite/",lang:"/app/i18n/",engyComponents:"/app/eComp/"},V={controller:".js",model:".js",view:".html",interface:".interface.js"},w=["asp","do","exe","html","htm","jmvc","jsp","js","jeti","j","ninja","mvc","ohmygod","omg","php","wtf","whathafuck","trojan","deinemutter"],x={controller:"index",action:"index"},E=["vendors/google/analytics/analytics","core/lib/widgzard/widgzard"],_={},k="ajax";return g={check:function(e,t){try{e.apply(null,t||[])}catch(e){l.notify(e)}},code:function(){var e=window.open("","","scrollbar=1,top=20,left=20,width="+(window.innerWidth-40)),t=window.document.documentElement.outerHTML,n=g.formatCode(t);e.document.body.style.overflow="scroll",e.document.body.style.margin="0px",e.document.body.style.padding="5px",e.document.body.style.backgroundColor="#000",e.document.body.style.color="#0f0",e.document.body.innerHTML='<pre style="overflow:scroll; height:100%;">'+JMVC.htmlChars(n)+"</pre>"},debug:function(t){var n=+new Date,r=n-(e.vars.endtime||e.vars.starttime||n),o=r%1e3,i=~~(r%6e4/1e3),a=~~(r/6e4),s="";s+=(a&&~~a+"m")+(i&&~~i+"s")+o+" ms :: ",s+=t;try{W.console.log(s)}catch(e){try{W.opera.postError(s)}catch(e){W[W.hasOwnProperty("log")?"log":"alert"](s)}}return!0},define:function(t,n,r){return g.ns.check(t,e)||g.require.apply(null,n.concat([function(){for(var o=[],i=0,a=n.length;i<a;)o.push(g.ns.check(n[i++],e));return g.ns.make(t,r.apply(null,o),e)}]))},del:function(t,n){return n?n.removeItem(t):t in e.vars&&(e.vars[t]=null),e},delegate:function(t,n){var r=[].slice.call(arguments,2);return function(){return t.apply(n||e,[].concat(r,[].slice.call(arguments,0)))}},each:function(e,t){var n,r,o,i="length"in e?"array":"object";if(t._break=!1,t._continue=!1,t.break=function(){t._break=!0},t.continue=function(){t._continue=!0},"array"===i)for(o=[],n=0,r=e.length,null;n<r;n+=1)if(t._continue)t._continue=!1;else{if(t._break)break;o.push(t.call(e,e[n],n))}else if("object"===i){o={};for(n in e)if(e.hasOwnProperty(n)){if(t._continue){t._continue=!1;continue}if(t._break)break;!function(n){o[n]=t.call(e,e[n],n)}(n)}}else o=t(e);return o},extend:function(t,n){if(!t)throw new JMVC.Errors.BadParams("Missing first parameter for extend");if(!n)throw new JMVC.Errors.BadParams("Missing object parameter for extend");if("function"==typeof n)return g.extend(t,n());if("function"==typeof n.initCheck){if(!n.initCheck.call(e))return!1;n.initCheck=null}var r=g.ns.make("JMVC."+t);return f.call(r),function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&e[n]===undefined&&(e[n]=t[n])}(r,n),"function"==typeof n.init&&(n.init.call(e),n.init=null),r},factory_method:function(t,n,r){var o=n.split("/"),i=!1,a=e.vars.baseurl+v+"app"+v+t+"s/",s=t;return o.length>1&&(n=o.pop(),i=o.join(v)),"controller"===t&&(a+=e.c_prepath),a+=(i?i+v:"")+n,!(!(s=s.match(/(view|model|controller|interface)/))||s[0]!==t)&&(a+=V[t],g.xhrget(a,t,n,r))},formatCode:function(e){var t,n=e||document.documentElement.outerHTML,r=0,o="",i=0,a=new Array(5).join("&nbsp;"),s={open:/^<([^\/].*[^\/])>$/,close:/^<\/(.*)>$/,autoclose:/^<[^>]*\/>$/,text:/^[^<]*$/,special:/<(meta|link|br|hr|img|col|input|source)+(\s[^>]*|>)?\/?>/},c=[],u=0,l=0,d={special:1,open:2,close:3,autoclose:4,text:5},f=function(){return"\n"+p()+(r>0?new Array(r+1).join(a):"")},p=function(){return i++,new Array(6-(""+i).length).join("0")+i},m=function(e){return e.match(s.special)?d.special:e.match(s.open)?d.open:e.match(s.close)?d.close:e.match(s.autoclose)?d.autoclose:e.match(s.text)?d.text:d.open};for(n=n.replace(/\s{2,}/g," ").replace(/>[\s|\t]*</g,"><").replace(/[\n|\t|\r]/g,"").replace(/<!--([\s\S]*?)-->/gim,"").split(/(<[^>]+>)/gi),l=n.length;u<l;u++)n[u]&&c.push(n[u]);for(u=0,l=c.length;u<l;u++)switch(t=c[u],m(t)){case d.special:o+=f()+t;break;case d.open:if(o+=f()+t,"<script>"===t)for(;"<\/script>"!==t;)t=c[++u],o+=t;else r++;break;case d.close:r--,o+=f()+t;break;case d.autoclose:o+=f()+t;break;case d.text:o+=t,u+1<l&&m(c[u+1])===d.close&&(o+=c[u+1],u++,r--)}return o},get:function(t,n){return n?JSON.parse(n.getItem(t)):e.vars[t]||undefined},globalize:function(e,t){JMVC.W[t]=e},hook:function(t,n){var r=["onBeforeRender","onAfterRender","onBeforeParse","onAfterParse"],o=0;for(o in t)if(t.hasOwnProperty(o))try{if(!(e.array.find(r,o)>-1||n))throw{message:'EXCEPTION : You`re trying to hook unallowed function "'+o+'"'};_.hasOwnProperty(o)&&_[o]instanceof Array||(_[o]=[]),_[o].push(t[o])}catch(e){W.alert(e.message)}},hook_check:function(e,t){var n,r,o=t instanceof Array&&t;if(o&&e in _)for(n in _[e])r=_[e][n].apply(null,o),!((o=r||o)instanceof Array)&&(o=[o]);return o},htmlChars:function(e,t){return(t?"<pre>":"")+e.replace(/&(?![\w\#]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")+(t?"</pre>":"")},htmlCharsDecode:function(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'")},implement:function(e,t){var n=0,r=t.length;for(null;n<r;n+=1)if(!(e.prototype&&t[n]in e.prototype&&"function"==typeof e.prototype[t[n]]||t[n]in e&&"function"==typeof e[t[n]]))return!1;return!0},inherit:function(){for(var e=[].slice.call(arguments,0),t=e.length-1;t>0;)!function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superClass=t.prototype,e.baseConstructor=t,e.super=function(e){var n=[].slice.call(arguments,1);t.apply(e,n)}}(e[t-1],e[t]),t--},jeval:function(e){try{return JMVC.W.eval(e)}catch(e){}return!1},lang:function(){for(var e=[].slice.call(arguments,0),t=0,n=e.length;t<n;)!JMVC.i18n.langs[e[t]]&&(JMVC.i18n.langs[e[t]]=!0),t+=1},model_inherit:function(e){e.prototype.get=r.prototype.get,e.prototype.set=r.prototype.set,e.prototype.del=r.prototype.del,e.prototype.vars=r.prototype.vars,e.prototype.reset=r.prototype.reset,e.prototype.constructor=r.prototype.constructor},multi_inherit:function(e,t){g.each(e,function(e){g.inherit(e,t)})},ns:{make:function(e,t,n){var r,o=e.split(/\.|\//),i=o.length;return void 0===n&&(n=window),void 0===t&&(t={}),"function"==typeof t&&(t=t()),n[o[0]]||(n[o[0]]=1===i?t:{}),r=n[o[0]],i>1?g.ns.make(o.slice(1).join("."),t,n[o[0]]):r},check:function(e,t){e=e.replace(/^\//,"");var n=e.split(/\.|\//),r=0,o=n.length;if(t=t!==undefined?t:W,!e)return t;for(null;r<o;r+=1){if(void 0===t[n[r]])return undefined;t=t[n[r]]}return t}},parseLang:function(t){var n,r=!0,o=1e5,i=e.cookie.get("lang")||"en";for(JMVC.vars.currentlang=i,e.lang(JMVC.vars.currentlang),!0===JMVC.i18n.langs[JMVC.vars.currentlang]&&e.io.get(JMVC.vars.baseurl+J.lang+JMVC.vars.currentlang+".js",function(e){g.jeval(e)},!1);o&&(r=new RegExp("\\[L\\[([\\S\\s]*?)\\]\\]","gm").exec(t),n="",r);)n=e.i18n.langs[JMVC.vars.currentlang]&&e.i18n.langs[JMVC.vars.currentlang][r[1]]||r[1],t=t.replace(r[0],n),r=!!r,o-=1;return t},prototipize:function(e,t){var n,r,o=0;if(e instanceof Array)for(r=e.length;o<r;o+=1)g.prototipize(e[o],t);for(n in t)t.hasOwnProperty(n)&&(e.prototype[n]=t[n])},purge:function(e){var t;try{for(t in e)e[t]=null,delete e[t]}catch(e){}},render:function(t){var r,o;if(e.factory("controller",e.c),e.c in e.controllers){g.inherit(e.controllers[e.c],n),r=new e.controllers[e.c],e.controllers[e.c]=r,"jmvc_routes"in r&&(e.a=r.jmvc_routes[e.a]||e.a);for(o in e.p)e.p.hasOwnProperty(o)&&r.set(o,decodeURI(e.p[o]));"before"in r&&"function"==typeof r.before&&r.before(e.p),"before_"+e.a in r&&"function"==typeof r["before_"+e.a]&&r["before_"+e.a](e.p),"action_"+e.a in r&&"function"==typeof r["action_"+e.a]?r["action_"+e.a](e.p):"action"in r&&"function"==typeof r.action?r.action(e.a,e.p):e.a.toLowerCase()!==x.action&&WDL.replace("/404/msg/act/"+e.a),"after_"+e.a in r&&"function"==typeof r["after_"+e.a]&&e.hook({onAfterRender:function(){r["after_"+e.a](e.p)}}),"after"in r&&"function"==typeof r.after&&e.hook({onAfterRender:function(){r.after(e.p)}})}else e.c.toLowerCase()!==x.controller&&WDL.replace("/404/msg/cnt/"+e.c);t&&"function"==typeof t&&t.call(e),e.events.loadifyCalled||(WD.body.style.opacity=1,WD.body.style.filter="alpha(opacity=100)"),e.loaded=!0},require:function(){for(var t,n,r,o,i=0,a=arguments,s=a.length,c=JMVC.WD.getElementsByTagName("head").item(0),u=null;i<s;){if("function"==typeof a[i]&&(u=a[i]),"string"==typeof a[i])if(a[i].match(/\/$/))e.io.getJson(JMVC.vars.baseurl+J.ext+a[i]+"require.json",function(e){for(var t in e)g.require(a[i]+e[t])},!1);else if(!e.extensions[a[i]]){if(n=a[i].split(v),r=n.length,n[r-1],t=JMVC.vars.baseurl+J["testsuite"===a[i]?"test":"ext"]+a[i].replace(/\./,"/")+".js",k.match(/ajax/))e.io.get(t,function(e){g.jeval(e)},!1);else{if(!k.match(/script/))throw new JMVC.Errors.BadSetting('No way to use JMVC.require function: getmode not in ["ajax","script","scriptghost"]');o=JMVC.WD.createElement("script"),o.type="text/javascript",o.src=t,c.appendChild(o),"scriptghost"===k&&c.removeChild(o)}e.extensions[a[i]]=a[i]}i++}return!u||u()},set:function(t,n,r){if(JMVC.util.isObject(t)){for(var o in t)e.set(o,t[o],r);return e}return r?r.setItem(t,JSON.stringify(n)):e.vars[t]=n,e},shutConsole:function(){W.console.log=function(){},W.console.dir=function(){},W.console.debug=function(){},W.console.clear=function(){},W.console.warn=function(){},W.console.info=function(){},W.console.error=function(){}},xhrget:function(t,r,i,a){var s,c=!1;return"view"===r&&"function"==typeof e.views[i]?c=e.views[i]:"model"===r&&"function"==typeof e.models[i]?(s=new e.models[i],a&&e.models[i].apply(s,a),s.vars={},c=s):e.io.get(t,function(t){switch(r){case"view":e.views[i]=new o(t),c=e.views[i];break;case"controller":g.jeval(t),g.inherit(e[r+"s"][i],n);break;case"model":g.jeval(t),g.model_inherit(e[r+"s"][i]),s=new e.models[i],a&&e.models[i].apply(s,a),s.vars={},c=s;break;case"interface":!(i in JMVC.interfaces)&&g.jeval(t)}},!1),c},xdoc:function(t){if(!("elements"in JMVC.xdoc)&&(JMVC.xdoc.elements={}),e.require("core/xdoc/xdoc"),t in JMVC.xdoc.elements)JMVC.xdoc.toggle(t);else try{JMVC.io.getXML(JMVC.vars.baseurl+"/app/extensions/"+t+".xml",function(e){JMVC.xdoc.elements[t]=e,JMVC.xdoc.toggle(t)},function(e){return alert(["[ JMVC WARNING ]","The document",("/app/extensions/"+t+".xml").replace(/\//g," / "),"CANNOT be found!"].join("\n\n")),e.abort(),!1})}catch(e){}},get2:function(e){return g.ns.check(e,JMVC.vars)},set2:function(e,t){g.ns.make(e,t,JMVC.vars)},del2:function(e){g.purge(g.get2(e))}},m=function(e){W.setTimeout(function(){var t=u.create(),n=null,r=function(e,t){JMVC.dom.remove(t)};t.then(r),function(t){n=JMVC.dom.add(JMVC.dom.body(),"iframe",{src:e,width:1,height:1}),n.contentWindow.onload=function(){t.done(n)}}(t)},0)},l={Network:function(e){this.name="Network",this.message=e||this.name+" error"},BadParams:function(e){this.name="BadParams",this.message=e||this.name+" error"},BadName:function(e){this.name="BadName",this.message=e||this.name+" error"},BadImplement:function(e){this.name="BadImplement",this.message=e||this.name+" error"},ControllerNotFound:function(e){this.name="ControllerNotFound",this.message=e||this.name+" error"},ActionNotFound:function(e){this.name="ActionNotFound",this.message=e||this.name+" error"},BadSetting:function(e){this.name="SettingMismash",this.message=e||this.name+" error"}},g.multi_inherit(l,W.Error),l.notify=function(e){var t="[ERROR "+e.name+" : "+e.message;return JMVC.debug(t)&&alert(t),!1},c=function(){var e=function(e){this.sender=e,this.listeners=[]};return e.prototype={attach:function(e){return this.listeners.push(e),this},notify:function(e){for(var t=0,n=this.listeners.length;t<n;)this.listeners[t++](this.sender,e);return this}},{create:function(t){return new e(t)}}}(),d=function(){var e={},t=function(e,t){if("indexOf"in e)return e.indexOf(t);for(var n=e.length-1;e[n]!==t;)n--;return n},n=function(){this.topic2cbs={},this.enabled=!0};return n.prototype={enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},pub:function(e,t){var n,r=0;if(!(e in this.topic2cbs&&this.enabled))return!1;for(n=this.topic2cbs[e].length;r<n;r+=1)this.topic2cbs[e][r].apply(null,[e].concat(t));return!0},sub:function(e,n,r){var o,i=0;if(e instanceof Array)for(o=e.length;i<o;i+=1)this.sub(e[i],n);if(e in this.topic2cbs&&this.enabled||(this.topic2cbs[e]=[]),!r&&t(this.topic2cbs[e],n)>=0)return this;this.topic2cbs[e].push(n)},unsub:function(e,n){var r,o=0;if(e instanceof Array)for(r=e.length;o<r;o+=1)this.unsub(e[o],n);return e in this.topic2cbs&&(o=t(this.topic2cbs[e],n))>=0&&this.topic2cbs[e].splice(o,1),this},once:function(e,t){var n=this,r=function(){t.apply(null,Array.prototype.slice.call(arguments,0)),n.unsub(e,r)};this.sub(e,r)},reset:function(){var e=Array.prototype.slice.call(arguments,0),t=e.length,n=0;if(!t)return this.topic2cbs={},this;for(null;n<t;n+=1)e[n]in this.topic2cbs&&(this.topic2cbs[e[n]]=[]);return this}},function(t){return t in e?e[t]:e[t]=new n}}(),s=d("JMVC"),f=function(){this._={}},f.prototype={},u=function(){function e(e,t){for(var r=new n,o=function(){return e[0].apply(r,[r].concat([t])),r}(),i=[o],a=1,s=e.length;a<s;a++)i.push(i[a-1].then(e[a]));return r}function t(e,t){var r=new n,o=[],i=[],a=0,s=e.length,c=s,u=function(e){!e&&r.done.apply(r,o)};for(null;a<s;a++)!function(r){i[r]=new n;var a=e[r].apply(i[r],[i[r],t]);(a instanceof n?a:i[r]).then(function(e,t){o[r]=t,u(--c)})}(a);return r}var n=function(){this.cbacks=[],this.solved=!1,this.result=null},r=n.prototype;return r.then=function(e,t){var n=this,r=function(){n.solved=!1,e.apply(t||n,[t||n,n.result])};return this.solved?r():this.cbacks.push(r),this},r.done=function(){var e=[].slice.call(arguments,0);if(this.result=e,this.solved=!0,!this.cbacks.length)return this.result;this.cbacks.shift()(e)},{create:function(){return new n},chain:e,join:t}}(),i=function(){var e=function(e,t){var n,r=0;if(this.name=e,this.mthds=[],!(t instanceof Array))throw new Error("An array of strings must be passed to the Interface constructor");for(n=t.length,null;r<n;r+=1)"string"==typeof t[r]&&this.mthds.push(t[r])};return{create:function(t,n){return new e(t,n)}}}(),i.checkImplements=function(e){for(var t,n=0,r=Array.prototype.slice.call(arguments),o=r.length,i=!0,a="";++n<o;)for(t in r[n].mthds)"function"!=typeof e[r[n].mthds[t]]&&(i=!1,a+="Function Interface.checkImplements: object does not implement the `"+r[n].name+"` interface : method "+r[n].mthds[t]+" was not found.\n");return i||JMVC.debug(a),i},p=function(){this.queue=[]},p.prototype.add=function(e){this.queue.push(e)},p.prototype.run=function(){for(var e,t=0,n=this.queue.length,r=[].slice.call(arguments,0);t<n;)e=this.queue[t++],!(r instanceof Array)&&(r=[r]),r=e.apply(null,r);return r},p.prototype.reset=function(){this.queue.length=0},n=function(){},n.prototype.view=!1,n.prototype.vars={},n.prototype.jmvc_routes={},n.prototype.index=function(){W.alert("Default index action, write down a controller with at least an index action")},n.prototype.addRoutes=function(e,t){var n;if("string"==typeof e&&(this.jmvc_routes[e]=t),"object"==typeof e)for(n in e)e.hasOwnProperty(n)&&this.addRoutes(n,e[n])},n.prototype.relocate=function(e,t){W.setTimeout(function(){WDL.href=String(e)},~~t||0)},n.prototype.render=function(e,t){return"function"==typeof e&&(t=e,e=!1),this.view=new o(e),this.view.render(t&&"function"==typeof t?{cback:t}:null),this},n.prototype.reset=function(){return this.vars={},this},r=function(){},r.prototype.vars={},r.prototype.reset=function(){return this.vars={},this},r.prototype.constructor="model",o=function(t){this.container=!1,this.ocontent=t||"",this.content=t||"",this.vars={baseurl:e.vars.baseurl}},o.prototype.parse=function(t){var n;if(this.content){if(t)for(n in t.vars)t.vars.hasOwnProperty(n)&&(this.content=this.content.replace(new RegExp("\\$"+n+"\\$","g"),t.get(n)||""));for(n in e.vars)e.vars.hasOwnProperty(n)&&(this.content=this.content.replace(new RegExp("\\$"+n+"\\$","gm"),e.vars[n]||""))}return this},o.prototype.reset=function(){return this.content=this.ocontent,this.vars={},this},o.prototype.setFromUrl=function(t,n){return this.set(String(t),e.controllers[e.c].get(t)||n||"unset"),this},o.prototype.getFromUrl=function(t){return e.controllers[e.c].get(t)||!1},o.prototype.render=function(t){var n,r,o=t||{},i=o.cback||!1,s=o.argz||null,c=o.target||WD.body,u=this,l=this.content;for("function"==typeof t&&(i=t),n=1;n;)(n=new RegExp("\\$(.[^\\$\\s}]*)\\$","gm").exec(l))&&(r=this.get(n[1])||"",l=l.replace("$"+n[1]+"$",r));return l=a.parse(l),this.content=l,this.container=c,e.loaded?(e.dom.html(c,u.content),i&&i.apply(this,s||[])):e.events.on(W,"load",function(){e.events.startRender(),e.loaded=!0,e.vars.starttime=h,e.vars.endtime=+new Date,e.vars.rendertime=e.vars.endtime-e.vars.starttime,u.content=g.hook_check("onBeforeRender",[u.content])||u.content,e.dom.html(c,u.content),i&&i.apply(this,s||[]),u.content=g.hook_check("onAfterRender",[u.content])||u.content,e.events.endRender()}),this},o.prototype.clone=function(t){var n=!1;return void 0!==t?(e.views[t]=new o(this.ocontent),n=e.views[t]):n=new o(this.ocontest),n},o.prototype.get=r.prototype.get=n.prototype.get=function(e){return!!this.vars[e]&&this.vars[e]},o.prototype.set=r.prototype.set=n.prototype.set=function(e,t,n){var r;switch(typeof e){case"string":this.vars[e]&&!n||(this.vars[e]=t);break;case"object":for(r in e)e.hasOwnProperty(r)&&(!this.vars[r]||t||n)&&(this.vars[r]=e[r])}return this},o.prototype.del=r.prototype.del=n.prototype.del=function(e){return!!this.vars[e]&&(this.vars[e]=null),this},a={tpl:function(e){return e.match(/\<%/)?function(e){return new Function("obj","var p=[]; p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');  return p.join('');")(e)}(e):e},parse:function(t){if(void 0===t)return"";var n,r,o,i,s,c,u,l,d,f=t,p={patt:"{{(.[^\\}]*)}}",pattpar:"\\s(.[A-z]*)=`(.[^/`]*)`",pattvar:"\\$(.[^\\$\\s}]*)\\$",viewname:"^(.[A-z_/]*)\\s"},m=0,h=!0;for(g.hook_check("onBeforeParse",[f]);m<100;)if(m+=1,c=new RegExp(p.patt,"gm").exec(f)){if(o=i=c[1],s=!1,new RegExp(p.pattpar,"gm").test(c[1]))for(s={},d=new RegExp(p.viewname).exec(c[1]),o=d[1],d=c[1];h;)l=new RegExp(p.pattpar,"gm").exec(d),l?(s[l[1]]=l[2],d=d.replace(" "+l[1]+"=`"+l[2]+"`","")):h=!1;if(u=e.views[o]?e.views[o]:e.factory("view",o),!1!==s)for(r in s)s.hasOwnProperty(r)&&u.set(r,s[r]);for(l=!0;l;)(l=new RegExp(p.pattvar,"gm").exec(u.content))&&(u.content=u.content.replace("$"+l[1]+"$",u.get(l[1])));f=f.replace("{{"+i+"}}",u.content)}else m=100;for(n in e.vars)e.vars.hasOwnProperty(n)&&(f=f.replace(new RegExp("\\$"+n+"\\$","g"),e.vars[n]));return f=a.tpl(f),g.hook_check("onAfterParse",[f]),f}},t=function(){var e,t,n,r={url:WDL.protocol+v+v+WDL.hostname+WDL.pathname+WDL.search,proto:WDL.protocol,host:WDL.hostname,path:WDL.pathname,search:WDL.search,hash:WDL.hash.substr(1),port:WDL.port?":"+WDL.port:""},o=r.path.replace(new RegExp("\\."+w.join("|\\."),"gm"),"").substr(1).split(v),i=!1,a=!1,s={},c="",u=[],l=/_|-/,d=WDL.protocol+v+v+WDL.hostname;for(o[0].match(/^test_/)&&E.push("testsuite"),i=o.shift()||x.controller,i.match(l)&&(u=i.split(l),i=u.pop(),c=u.join(v)+v),a=o.shift()||x.action,n=o.length,t=0;t+1<n;t+=2)s[o[t]]=o[t+1];if(""!==r.search)for(o=r.search.substr(1).split("&"),t=0,n=o.length;t<n;t+=1)e=o[t].split("="),!s[e[0]]&&(s[e[0]]=e[1]);return"jmvcgoto"in s?(document.location.href=W.decodeURIComponent(s.jmvcgoto),!1):{controller:i.replace(/\//g,""),controller_prepath:c,action:a.replace(/\//g,""),params:s,baseurl:d,port:r.port,search:r.search,hash:r.hash}}(),e={loaded:!1,W:W,WD:WD,WDL:WDL,WDB:WDB,US:v,M:Math,c_prepath:t.controller_prepath,c:t.controller||x.controller,a:t.action||x.action,p:t.params||{},hash:t.hash,controllers:{},models:{},views:{},interfaces:{},vars:{baseurl:t.baseurl+t.port,extensions:t.baseurl+t.port+J.ext,engyComponents:t.baseurl+t.port+J.engyComponents,devurl:y,produrl:C,devurlstatic:M,produrlstatic:b,version:"3.8",review:"3",date:"6/7/2017",time:"23:57:15",last_modified:WD.lastModified,starttime:0,rendertime:0,endtime:0,retina:W.devicePixelRatio>1,randcolor:new function(){var e=["00","33","66","99","CC","FF"];this.toString=function(){return"#"+e[JMVC.util.rand(0,5)]+e[JMVC.util.rand(0,5)]+e[JMVC.util.rand(0,5)]}},currentlang:"en"},widget:{},extensions:{},extensions_params:{},i18n:{langs:{},load:function(e,t){t=t||JMVC.vars.currentlang,JMVC.i18n.langs[t]=JMVC.object.extend(JMVC.i18n.langs[t],e)}},modules:E,nsCheck:g.ns.check,nsMake:g.ns.make,Channel:d,Event:c,Errors:l,Interface:i,FunctionQueue:p,Pipe:s,Promise:u,parseLang:g.parseLang,hookCheck:g.hook_check,debug:g.debug,delegate:g.delegate,code:g.code,extend:g.extend,define:g.define,factory:g.factory_method,inherit:g.inherit,multinherit:g.multi_inherit,preload:m,check:g.check,hook:g.hook,hooks:_,jeval:g.jeval,prototipize:g.prototipize,purge:g.purge,parse:a.parse,render:g.render,require:g.require,lang:g.lang,shutConsole:g.shutConsole,set:g.set,get:g.get,del:g.del,set2:g.set2,get2:g.get2,del2:g.del2,htmlChars:g.htmlChars,htmlCharsDecode:g.htmlCharsDecode,gc:function(){var e=0,t=arguments,n=t.length;for(null;e<n;e+=1)t[e]=null},getView:function(e){return g.factory_method("view",e)},getModel:function(e,t){return g.factory_method("model",e,t)},loadInterfaces:function(e,t){return g.factory_method("interface",e,t)},implement:g.implement,each:g.each,console:function(t){function n(){return JMVC.console.toggle(t.h,t.j,t.c,t.tab)}return t=t||{},t.clear&&(t.h=t.j=t.c=""),"core/console/console"in e.extensions?n():e.require("core/console/console",n)},xdoc:g.xdoc,loading:function(e,t){try{document.getElementById("JMVCisloading").style.display="block",document.getElementById("JMVCloading").style.width=~~e+"%",t&&(document.getElementById("JMVCloadingmessage").innerHTML=t)}catch(e){}}},e.gc(y,C,w,"3.8","3",t,n,r,o,c,E,x,h),e}(),_={};_.common={digFor:function(e,t,n,r){if(!e.match(/key|value|keyvalue/))throw new JMVC.Errors.BadParams("Bad param for JMVC._.object.digFor");r=~~r;var o=0,i={key:function(e,t,n){return JMVC.util.isString(e)&&n instanceof RegExp?e.match(n):JMVC.object.jCompare(e,n)},value:function(e,t,n){return JMVC.util.isString(t)&&n instanceof RegExp?t.match(n):JMVC.object.jCompare(t,n)},keyvalue:function(e,t,n){return(JMVC.util.isString(e)&&n.key instanceof RegExp?e.match(n.key):JMVC.object.jCompare(e,n.key))&&(JMVC.util.isString(t)&&n.value instanceof RegExp?t.match(n.value):JMVC.object.jCompare(t,n.value))}}[e],a=[],s=function(e,t,n,r,s){var u=[].concat.call(e,[t]),l=i(t,r[t],n);l&&(a.push({obj:r,value:r[t],key:u[u.length-1],parentKey:u[u.length-2],path:u.join("/"),container:u.slice(0,u.length-1).join("/"),parentContainer:u.slice(0,u.length-2).join("/"),regexp:l,level:s}),o++),c(r[t],n,u,s+1)},c=function(e,t,n,i){var a,c;if(e instanceof Array)for(a=0,c=e.length;a<c&&(s(n,a,t,e,i),!r||r!=o);a++);else{if("object"!=typeof e)return;for(a in e)if(s(n,a,t,e,i),r&&r==o)break}};return c(t,n,[],0),a}},_.cookie={},JMVC.cookie={enabled:!0,cookie_nocookiesaround:!1,initCheck:function(){return JMVC.W.navigator.cookieEnabled},set:function(e,t,n,r,o,i){if(!JMVC.cookie.enabled)return!1;this.cookie_nocookiesaround=!1;var a=new Date,s=new Date(a.getTime()+n);return JMVC.WD.cookie=e+"="+JMVC.W.escape(t)+(n?";expires="+s.toGMTString():"")+(r?";path="+r:"")+(o?";domain="+o:"")+(i?";secure":""),!0},get:function(e){var t=JMVC.WD.cookie.split(";"),n="",r="",o=!1,i=0,a=t.length;if(!JMVC.cookie.enabled)return!1;for(null;i<a;i+=1){if(n=t[i].split("="),n[0].replace(/^\s+|\s+$/g,"")===e)return o=!0,n.length>1&&(r=JMVC.W.unescape(n[1].replace(/^\s+|\s+$/g,""))),r;n=null,""}return o},del:function(e,t,n){if(!JMVC.cookie.enabled)return!1;var r=!1;return this.get(e)&&(JMVC.WD.cookie=e+"="+(t?";path="+t:"")+(n?";domain="+n:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT",r=!0),r},delall:function(){if(!JMVC.cookie.enabled)return!1;var e,t=JMVC.WD.cookie.split(";"),n=0,r=t.length;for(null;n<r;n+=1)e=t[n].split("="),this.del(e[0],!1,!1);return this.cookie_nocookiesaround=!0,!0},getall:function(){return!!JMVC.cookie.enabled&&(""===JMVC.WD.cookie?[]:this.cookie_nocookiesaround?[]:JMVC.each(JMVC.WD.cookie.split(";"),function(e){var t=e.split("=");return{name:t[0],value:t[1]}}))}},_.io={getxhr:function(e){var t,n=["Msxml2.XMLHTTP","Msxml3.XMLHTTP","Microsoft.XMLHTTP"],r=void 0!==W.XDomainRequest&&document.all&&!navigator.userAgent.match(/opera/i),o=n.length,i=0;if(r&&e.cors)t=new W.XDomainRequest;else try{t=new W.XMLHttpRequest}catch(e){for(null;i<o;i+=1)try{t=new W.ActiveXObject(n[i])}catch(e){continue}!t&&alert("No way to initialize XHR")}return t},setHeaders:function(e,t,n){var r={xml:"text/xml",html:"text/html",json:"application/json"}[t]||"text/html";n&&e.setRequestHeader("Range","bytes="+n),e.setRequestHeader("Accept",r+"; charset=utf-8")},setMultipartHeader:function(e){e.setRequestHeader("Content-Type","multipart/form-data")},setCookiesHeaders:function(e){var t,n,r;for(t=JMVC.cookie.getall(),n=0,r=t.length;n<r;)e.setRequestHeader("Cookie",t[n].name+"="+t[n].value),n++},ajcall:function(e,t){var n,r,o=_.io.getxhr(t),i=void 0!==W.XDomainRequest&&document.all&&!navigator.userAgent.match(/opera/i),a=t&&t.method||"POST",s=t&&t.cback,c=t&&t.opened||function(){},u=t&&t.loading||function(){},l=t&&t.error||function(){},d=t&&t.abort||function(){},f=t&&t.async,p=t&&t.data||{},m=t&&t.type||"text/html",h=!t||t.cache===undefined||t.cache,g="xml"===m?"responseXML":"responseText",v=t&&t.timeout||1e4,y=t&&t.hasFiles,C=t.limitSize||!1,M=!1,b=!1,J=!1,V=!1;if(h||(p.C=JMVC.util.now()),"GET"===a)p=JMVC.object.toQs(p).substr(1);else{n=new FormData;for(r in p)n.append(r,p[r]);p=n}if(i&&t.cors){o.open(a,"GET"===a?e+(p?"?"+p:""):e),o.onerror=l,o.ontimeout=function(){},o.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;console.log(t+"% uploaded")}},o.onload=function(e){s(o.responseText)},o.timeout=3e3,_.io.setHeaders(o,m,C);var r={xml:"text/xml",html:"text/html",json:"application/json"}[m]||"text/html";o.contentType=r,window.setTimeout(function(){o.send()},20)}else{o.onreadystatechange=function(){if(V===o.readyState)return!1;if(V=o.readyState,4==~~o.readyState&&0==~~o.status)return o.onerror({error:404,xhr:o,url:e}),o.abort(),!1;if("complete"===o.readyState||4==~~o.readyState&&200==~~o.status)return M=!0,s&&(b=o[g],function(){s(b)}()),J=o[g],W.setTimeout(function(){o=null},50),J;if(3===o.readyState)u(o);else if(2===o.readyState)c(o);else if(1===o.readyState)switch(y?_.io.setHeaders(o,"json",C):_.io.setHeaders(o,m,C),a){case"POST":case"PUT":try{o.send(p||!0)}catch(e){}break;case"GET":try{o.send(null)}catch(e){}break;default:console.log("WARNING jmvc.io : "+a+" not managed!"),o.send(null)}return!0},o.onerror=function(){l&&l.apply(null,arguments)},o.onabort=function(){d&&d.apply(null,arguments)},o.open(a,"GET"===a?e+(p?"?"+p:""):e,f),W.setTimeout(function(){M||(M=!0,o.abort())},v);try{return"responseXML"===g?o[g].childNodes[0]:o[g]}catch(e){}}return!0}},JMVC.io={xhrcount:0,getxhr:_.io.getxhr,post:function(uri,cback,async,data,cache,files,err){return _.io.ajcall(uri,{cback:function(r){files?(r=r.replace(/(?:\/\*(?:[\s\S]*?)\*\/)|(?:([\s;])+\/\/(?:.*)$)/gm,""),cback(W.JSON&&W.JSON.parse?JSON.parse(r):eval("("+r+")"))):cback(r)},method:"POST",async:async,data:data,cache:cache,error:err,hasFiles:!!files})},get:function(e,t,n,r,o,i){return _.io.ajcall(e,{cback:t||function(){},method:"GET",async:n,data:r,cache:o,error:i})},put:function(e,t,n,r,o,i){return _.io.ajcall(e,{cback:t,method:"PUT",async:n,data:r,cache:o,error:i})},delete:function(e,t,n,r,o,i){return _.io.ajcall(e,{cback:t||function(){},method:"DELETE",async:n,data:r,cache:o,error:i})},getJson:function(e,t,n,r){return _.io.ajcall(e,{type:"json",method:"GET",async:!1,cback:function(e){var n=W.JSON&&W.JSON.parse?JSON.parse(e):JMVC.jeval("("+e+")");t(n)},error:r||function(){},data:n})},getXML:function(e,t,n){return _.io.ajcall(e,{method:"GET",async:!1,type:"xml",cors:!0,cache:!1,error:n||function(){},cback:t||function(){}})}},_.util={},JMVC.util={deg2rad:function(e){return e*JMVC.M.PI/180},getLink:function(e,t,n){var r=[];return e&&r.push(e),t&&r.push(t),n&&r.push(n),JMVC.vars.baseurl+JMVC.US+r.join(JMVC.US)},getParameters:function(scriptid,pname){var script=document.getElementById(scriptid),p=!1,parameters=!1;return pname=pname||"data-params",p=script.getAttribute(pname),parameters=p?eval("("+p+")"):{}},getSignature:function(e){for(var t,n=e.toString(),r=n.split(/\n/)[0].match(/\((.*)\)/)[1].split(","),o={},i=-1,a=r.length;++i<a;)t=JMVC.string.trim(r[i]).match(/(\w*)\s?(\/\*\*?([^*]*)\*\*?\/)?/),o[t[1]]=4==t.length?t[3]:"not specified";return o},getType:function(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},isMobile:function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|meego.+mobile|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}(),typeOf:function(e){return null===e?"null":isArray(e)?"array":typeof e},hex2int:function(e){return parseInt(e,16)},int2hex:function(e){return parseInt(e,10).toString(16)},isArray:function(e){if(Array.isArray&&Array.isArray(e))return!0;var t=String(e)!==e,n={}.toString.call(e).match(/\[object\sArray\]/);return t&&!(!n||!n.length)},isBoolean:function(e){return"boolean"==typeof e||e instanceof Boolean},
isDefined:function(e){return null!==e&&void 0!==e},isFunction:function(e){return"function"==typeof e||o instanceof Function},isNumber:function(e){return"number"==typeof e||e instanceof Number},isObject:function(e){var t=String(e)!==e,n=e===Object(e),r="function"!=typeof e,o={}.toString.call(e).match(/\[object\sObject\]/);return t&&n&&r&&!(!o||!o.length)},isPrimitive:function(e){return/string|number|boolean/.test(typeof e)},isSet:function(e){return void 0!==e},isString:function(e){return"string"==typeof e||e instanceof String},isTypeOf:function(e,t){return typeof e===t},isUndefined:function(e){return null===e||void 0===e},now:function(){return+new Date},rand:function(e,t){return e+~~(JMVC.M.random()*(t-e+1))},rad2deg:function(e){return 180*e/JMVC.M.PI},range:function(e,t){if(e>t)throw new JMVC.Errors.BadParams("ERROR: JMVC.util.range function #badparams ("+e+", "+t+")");for(var n=[];t-e+1;)n.push((e+=1)-1);return n},uniqueid:new function(){var e=0,t=this;this.prefix="JMVCID",this.toString=function(){return++e,t.prefix+e}}},_.dom={qsall:function(e){return"querySelectorAll"in JMVC.WD&&JMVC.WD.querySelectorAll(e)},nodeidMap:{},nodeAttrForIndex:"__ownid__"},JMVC.dom={add:function(e,t,n,r){var o=JMVC.dom.create(t,n,r);return JMVC.dom.append(e,o),o},addClass:function(e,t){if(JMVC.util.isArray(e))for(var n=0,r=e.length;n<r;n++)JMVC.dom.addClass(e[n],t);else{var o=e.className?e.className.split(" "):[];JMVC.array.find(o,t)<0&&(o.push(t),e.className=o.join(" "))}},append:function(e,t){if(JMVC.util.isArray(t))for(var n=0,r=t.length;n<r;n++)e.appendChild(t[n]);else e.appendChild(t);return e},attr:function(e,t,n){if(!e)return"";if(!("nodeType"in e))return!1;if(3===e.nodeType||8===e.nodeType)return undefined;var r,o=!1,i=!1,a=0;if(JMVC.util.isObject(t)&&e.setAttribute){for(a in t)e.setAttribute(a,t[a]);return!0}if(!t||t.constructor!==String)return"";if(void 0!==n)e[{for:"htmlFor",class:"className"}[t]||t]=n,e.setAttribute&&e.setAttribute(t,n);else{if(!(r=e.getAttribute&&e.getAttribute(t)||0))for(o=e.attributes,i=o.length,a=0;a<i;a+=1)if(o[a].nodeName===t)return o[a].value;e=r}return e},body:function(){return WD.body},childs:function(e,t){return t?e.children:e.childNodes},clearer:function(){return JMVC.dom.create("br",{class:"clearer"})},clone:function(e,t){return e.cloneNode(!!t)},create:function(e,t,n){if(!e)return W.alert("no tag"),!1;var r,o=JMVC.WD.createElement(e);t=t||{};for(r in t)t.hasOwnProperty(r)&&o.setAttribute(String(r),String(t[r]));return void 0!==n&&(n.nodeType&&1===n.nodeType?JMVC.dom.append(o,n):JMVC.dom.html(o,n)),o},createText:function(e){return JMVC.WD.createTextNode(e)},createNS:function(e,t){return JMVC.WD.createElementNS(e,t)},descendant:function(){var e=Array.prototype.slice.call(arguments,0),t=0,n=e.shift(),r=e.length;if(!r)return n;for(;t<r;)n=n.children.item(~~e[t++]);return n},domStats:function(){return{numberOfNodes:JMVC.array.coll2array(document.getElementsByTagName("*")).length,KBytes:parseFloat((document.documentElement.outerHTML.split("").length/1024).toFixed(2),10)}},empty:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},empty2:function(e){e.innerHTML=""},find:function(e,t){var n="getElement",r=!0,o=!1,i=!1;if("*"==e)return document.getElementsByTagName("*");if(1===e.nodeType)return e;if(!o){switch(e=e.match(/^(\W)?([A-z0-9-_]*)/),e[1]||"="){case"#":n+="ById",r=!1;break;case".":n+="sByClassName";break;case"@":n+="sByName";break;case"=":n+="sByTagName";break;default:return[]}o=(t||JMVC.WD)[n](e[2])}return o=r?JMVC.array.coll2array(o):o,i=o instanceof Array,i&&1===o.length?o[0]:o},find2:function(e,t){if(1===e.nodeType)return e;var n=0,r=0;return e=e.match(/^(\W)?([A-z0-9-_]*)/),e[1]=e[1]||"=",n="#"!==e[1],r=(t||JMVC.WD)["getElement"+{"#":"ById",".":"ByClassName","@":"sByName","=":"sByTagName"}[e[1]]](e[2]),r=n?JMVC.array.coll2array(r):r,r instanceof Array&&1===r.length?r[0]:r},findInnerByClass:function(e,t){var n=[],r=new RegExp("\\b"+t+"\\b"),o=e.getElementsByTagName("*"),i=0,a=o.length;for(null;i<a;i+=1)r.test(o[i].className)&&n.push(o[i]);return n},findByAttribute:function(e,t,n){var r,o,i=[],a=[],s=t===undefined,c=n instanceof Array;for(n=c?n:n||JMVC.WD.body,a=c?n:n.all?n.all:n.getElementsByTagName("*"),o=a.length;o--;)"string"!=typeof(r=a[o].getAttribute(e))||!s&&r!==t||i.push(a[o]);return i},firstAncestor:function(e,t){do{e=e.parentNode}while(e&&e.tagName!==t.toUpperCase());return e},gebtn:function(e,t){return Array.prototype.slice.call(e.getElementsByTagName(t),0)},getPosition:function(e){var t={x:0,y:0};if(e.offsetParent)for(;;){if(t.x+=e.offsetLeft,t.y+=e.offsetTop,!e.offsetParent)break;e=e.offsetParent}else e.x&&(t.x+=e.x),e.y&&(t.y+=e.y);return t},hasAttribute:function(e,t){return null!==e.getAttribute(t)},hasClass:function(e,t){return!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},html:function(e,t){if(!e)return JMVC.dom;var n="";if(void 0!==t){if(e)try{JMVC.dom.empty(e),JMVC.dom.isElement(t)?JMVC.dom.append(e,t):e.innerHTML=t+""}catch(e){}return JMVC.dom}return n=1===e.nodeType?e.innerHTML:e,JMVC.purge(e),n.trim()},idize:function(e,t){if(!((t=t||_.dom.nodeAttrForIndex)in e)){var n=JMVC.util.uniqueid+"";e[t]=n,_.dom.nodeidMap[n]=e}return e[t]},insertAfter:function(e,t){var n=t.parentNode,r=t.nextSibling;return r?n.insertBefore(e,r):n.appendChild(e),e},insertBefore:function(e,t){return t.parentNode.insertBefore(e,t),e},isElement:function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&typeof e.nodeType!==undefined&&1===e.nodeType&&"string"==typeof e.nodeName},isNodeList:function(e){return!("value"in e)&&"number"==typeof e.length&&"function"==typeof e.item},isNode:function(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},nodeFromId:function(e){return _.dom.nodeidMap[e]},nodeTypeString:function(e){return["ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE"][e.nodeType-1]||undefined},nthchild:function(e,t,n){for(var r=e.childNodes,o=[],i=r.length,a=0,s=n||["TEXT_NODE"];i;)JMVC.array.find(s,JMVC.dom.nodeTypeString(r[a]))&&(o.push(r[a]),a+=1),i-=1;return i=o.length,t<i&&o[t]},preloadImage:function(e,t){var n=new W.Image;return"function"==typeof t&&(n.onload=t(n)),n.src=e,n},parent:function(e){return!(!e.parentNode||11===e.parentNode.nodeType)&&e.parentNode},prepend:function(e,t){var n=e.childNodes[0];return e.insertBefore(t,n),t},remove:function(e,t){if(!e)return!1;t&&JMVC.events.free(e);var n;if("string"==typeof e&&(e=JMVC.dom.find(e)),JMVC.util.isArray(e)){for(var r=0,o=e.length,i=!0;r<o;r++)i&=JMVC.dom.remove(e[r]);return i}return n=e.parentNode,n&&n.removeChild(e),n},removeAttribute:function(e,t){return e.removeAttribute(t),e},removeClass:function(e,t){var n,r;if(JMVC.util.isArray(e))for(n=0,r=e.length;n<r;n++)JMVC.dom.removeClass(e[n],t);else{if(!JMVC.util.isArray(t)){var o=new RegExp("(\\s|^)"+t+"(\\s|$)");return e.className&&(e.className=e.className.replace(o,"")),JMVC.dom}for(n=0,r=t.length;n<r;n++)JMVC.dom.removeClass(e,t[n])}},replace:function(e,t){var n=t.style.display;t.style.display="none",JMVC.dom.insertAfter(t,e),JMVC.dom.remove(e)&&(t.style.display=n)},setClass:function(e,t){if(JMVC.util.isArray(e))for(var n=0,r=e.length;n<r;n++)JMVC.dom.setClass(e[n],t);else e.className=t},swap:function(e,t){var n=e.parentNode,r=e.nextSibling,o=t.parentNode,i=t.nextSibling;n.insertBefore(t,r),o.insertBefore(e,i)},switchClass:function(e,t,n){return JMVC.dom.hasClass(e,t)&&(JMVC.dom.removeClass(e,t),!JMVC.dom.hasClass(e,n)&&JMVC.dom.addClass(e,n)),e},toggleClass:function(e,t){var n=JMVC.dom.hasClass(e,t);return JMVC.dom[n?"removeClass":"addClass"](e,t),n},val:function(e){return e.value},walk:function(e,t,n){n={pre:"pre",post:"post"}[n]||"post";var r=function(){},o="pre"===n?t:r,i="post"===n?t:r,a=function(){return function(e,t){for(o(e),t=e.firstChild;t;)a(t),t=t.nextSibling;i(e)}}();a(e)},wrap:function(e,t,n){var r=JMVC.dom.create(t||"div",n||{});return JMVC.dom.insertAfter(r,e),r.appendChild(e),r},wrapIn:function(e,t){var n=JMVC.dom.create("div",t||{});return n.innerHTML=e.innerHTML,e.innerHTML="",e.appendChild(n),n}},JMVC.bom={document:JMVC.WD,frames:JMVC.W.frames,history:JMVC.W.history,location:JMVC.W.location,navigator:JMVC.W.navigator,qs:function(e){JMVC.bom.location.search=JMVC.object.toQs(e)}},_.events={bindings:{},cbs:[],Estart:[],Eend:[],disabledRightClick:!1,wwdb_bindings:{},wwdb_channel:JMVC.Channel("wwdb"),bind:function(){function e(e,t,n){var r=JMVC.dom.idize(e);return!(t in _.events.bindings)&&(_.events.bindings[t]={}),!(r in _.events.bindings[t])&&(_.events.bindings[t][r]=[]),_.events.bindings[t][r].push(n),!0}return"addEventListener"in W?function(t,n,r){t.addEventListener.apply(t,[n,r,!1]),e(t,n,r)}:"attachEvent"in W?function(t,n,r){t.attachEvent.apply(t,["on"+n,r]),e(t,n,r)}:function(){throw new Error("No straight way to bind an event")}}(),fixCurrentTarget:function(e,t){var n=function(n){return e.call(t,n,t)},r=JMVC.array.find(_.events.cbs,n);return r>-1?_.events.cbs[r]:(_.events.cbs.push(n),n)},unbind:function(e,t,n){var r,o,i,a=JMVC.dom.idize(e);try{o=_.events.bindings[t][a]}catch(e){return!1}if(void 0===n){if(!(o=_.events.bindings[t][a]))return!1;for(i=o.length;i--;)_.events.unbind(e,t,o[i]);return!0}return-1!==(r=JMVC.array.find(_.events.bindings[t][a],n))&&(e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n),function(e,t,n){Array.prototype.splice.call(_.events.bindings[e][t],n,1)}(t,a,r),!0)},getElementDeterminant:function(e){return e.tagName.match(/input|textarea/i)?"value":"innerHTML"}},JMVC.events={innerKill:function(e){e.preventDefault(),_.events.kill(e)},enableScroll:function(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",JMVC.events.preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null,_.events.unbind(window,"touchmove",JMVC.events.innerKill)},disableScroll:function(){function e(e){if(t[e.keyCode])return JMVC.events.preventDefault(e),!1}var t={37:1,38:1,39:1,40:1};window.addEventListener&&window.addEventListener("DOMMouseScroll",JMVC.events.preventDefault,!1),window.onwheel=JMVC.events.preventDefault,window.onmousewheel=document.onmousewheel=JMVC.events.preventDefault,window.ontouchmove=JMVC.events.preventDefault,document.onkeydown=e,_.events.bind(window,"touchmove",JMVC.events.innerKill)},blurAllAnchorClicks:function(){JMVC.events.on(JMVC.W,"click",function(e){var t=JMVC.events.eventTarget(e);t.tagName&&"a"==t.tagName.toLowerCase()&&t.blur()})},click:function(e){JMVC.events.fire(e,"click")},code:function(e){return e.keyCode?e.keyCode:e.charCode?e.charCode:!!e.which&&e.which},coord:function(e){var t,n,r;return r=e.touches&&e.touches.length?e.touches[0]:e,r.pageX||r.pageY?(t=r.pageX,n=r.pageY):(t=r.clientX+JMVC.WD.body.scrollLeft+JMVC.WD.documentElement.scrollLeft,n=r.clientY+JMVC.WD.body.scrollTop+JMVC.WD.documentElement.scrollTop),[t,n]},delay:function(e,t){W.setTimeout(e,t)},disableRightClick:function(){if(_.events.disabledRightClick)return!1;_.events.disabledRightClick=!0;var e=JMVC.events;JMVC.dom.attr(JMVC.WD.body,"oncontextmenu","return false"),e.on(JMVC.WD,"mousedown",function(t){if(2==~~t.button)return e.preventDefault(t),!1})},end:function(e){_.events.Eend.push(e)},endRender:function(){var e=0,t=_.events.Eend.length;for(null;e<t;e+=1)_.events.Eend[e]()},eventTarget:function(e){e=e||JMVC.W.event;var t=e.currentTarget||void 0!==e.target?e.target:e.srcElement;if(!t)return!1;for(;3===t.nodeType&&null!==t.parentNode;)t=t.parentNode;return t},fire:function(e,t){"function"==typeof e[t]&&e[t]()},free:function(e,t){if(e=e||JMVC.WD,void 0===t){for(var n in _.events.bindings)JMVC.events.free(e,n);return!0}JMVC.dom.walk(e,function(e){JMVC.events.off(e,t)},"pre")},getCoord:function(e,t){var n=JMVC.events.coord(t);return n[0]-=e.offsetLeft,n[1]-=e.offsetTop,n},getOffset:function(e,t){e=e||window.event;var n=t||e.target||e.srcElement,r=JMVC.events.coord(e),o=n.getBoundingClientRect();return[r[0]-o.left,r[1]-o.top]},loadifyCalled:!1,loadify:function(e){function t(){r.delay(function(){WD.body.style.opacity=0,WD.body.style.filter="alpha(opacity=0)",o&&o.done()},0)}function n(){for(var t=0;t<=1;)W.setTimeout(function(e){WD.body.style.opacity=e,WD.body.style.filter="alpha(opacity="+100*e+")",(e>=1||isNaN(e))&&(WD.body.style.opacity=1,WD.body.style.filter="alpha(opacity=100)")},e*t,t+.05),t+=.05}var r=JMVC.events,o=null;e=e||1e3,r.loadifyCalled&&(o=JMVC.Promise.create(),t(),o.then(n)),r.loadifyCalled=!0,r.start(t),r.end(n)},kill:function(e){return e||(e=W.event,e.cancelBubble=!0,e.returnValue=!1),"stopPropagation"in e&&e.stopPropagation()&&e.preventDefault(),!1},off:function(e,t,n){if(e instanceof Array)for(var r=0,o=e.length;r<o;r++)_.events.unbind(e[r],t,n);else _.events.unbind(e,t,n)},on:function(e,t,n){var r=!0;if(e instanceof Array){for(var o=0,i=e.length;o<i;o++)r&=_.events.bind(e[o],t,n);return r}if(t instanceof Array){for(var o=0,i=t.length;o<i;o++)r&=_.events.bind(e,t[o],n);return r}return _.events.bind(e,t,n)},one:function(e,t,n){var r=JMVC.events;if(e instanceof Array)for(var o=0,i=e.length;o<i;o++)r.one(e[o],t,n);else r.on(e,t,function o(i){n.call(i,i),r.off(e,t,o)})},onEsc:function(e,t){t=t||JMVC.W,JMVC.events.on(t.document,"keyup",function(n){27==n.keyCode&&e.call(t,n)})},onElementSizeChange:function(e,t,n,r){r=r||200;var o,i,a=e.clientHeight,s=e.clientWidth,c=void 0===n||n.match(/height/),u=void 0===n||n.match(/width/);!function n(){o=e.clientHeight,i=e.clientWidth,(c&&a!=o||u&&s!=i)&&t(),a=o,s=i,e.onElementHeightChangeTimer&&clearTimeout(e.onElementHeightChangeTimer),e.onElementHeightChangeTimer=setTimeout(n,r)}()},onEventOut:function(e,t,n){var r=JMVC.events,o=window.document;r.on(o,t,function i(a){for(var s=r.eventTarget(a);s!==e;)if((s=JMVC.dom.parent(s))===o)return r.off(o,t,i),n(a)})},onNoEvent:function(e,t,n){function r(e){o&&window.clearTimeout(o),o=window.setTimeout(function(){t(e)},n)}n=n||3e3;var o,i=JMVC.events;i.on(e,"mousemove",r),i.on(e,"click",r),i.on(e,"touchstart",r)},onEventOut_old:function(e,t,n){var r=JMVC.events,o=JMVC.dom.body();r.on(o,t,function i(a){for(var s=r.eventTarget(a);s!==e;)if((s=JMVC.dom.parent(s))===o)return r.off(o,t,i),n(a)})},onRight:function(e,t){JMVC.events.disableRightClick(),JMVC.events.on(e,"mousedown",function(n){2==~~n.button&&t.call(e,n)})},preventDefault:function(e){e=e||W.event,e.preventDefault?e.preventDefault():e.returnValue=!1},readyOLD:function(){function e(e){return!!JMVC.loaded&&e.call()}return WD.addEventListener?function(t){return e(t)||WD.addEventListener("DOMContentLoaded",t,!1)}:W.addEventListener?function(t){return e(t)||W.addEventListener("load",t,!1)}:WD.attachEvent?function(t){return e(t)||WD.attachEvent("onreadystatechange",t)}:W.attachEvent?function(t){return e(t)||W.attachEvent("onload",t)}:void 0}(),ready:function(){var e=[],t=setInterval(function(){if("complete"===document.readyState){JMVC.loaded=!0,clearInterval(t);for(var n=0,r=e.length;n<r;n++)e[n].call(this)}},10);return function(t){"complete"===document.readyState?t.call(this):e.push(t)}}(),start:function(e){_.events.Estart.push(e)},startRender:function(){var e=0,t=_.events.Estart.length;for(null;e<t;e+=1)_.events.Estart[e]()},stopBubble:function(e){e.stopPropagation&&e.stopPropagation(),null!==e.cancelBubble&&(e.cancelBubble=!0)},scrollBy:function(e,t){JMVC.events.delay(function(){W.scrollBy(e,t)},1)},scrollTo:function(e,t){JMVC.events.delay(function(){W.scrollTo(e,t)},1)},touch:function(e){var t=[],n=0,r=e.touches,o=r.length;for(null;n<o;n+=1)t.push({x:r[n].pageX,y:r[n].pageY});return t},trigger:function(e,t){if("createEvent"in document){var n=document.createEvent("HTMLEvents");n.initEvent(t,!1,!0),e.dispatchEvent(n)}else{var r=document.createEventObject();r.eventType=t,e.fireEvent("on"+r.eventType,r)}},unload:function(){JMVC.events.on(W,"beforeunload",function(e){var t=/\//;return(e||window.event).returnValue=t,t})},wwon:function(e,t,n,r){var o=!1,i=!1,a=_.events.getElementDeterminant(n),s=n[a],c=e[t],u=function(e){o=i=!!e};n.wwdbID="_"+JMVC.util.uniqueid,_.events.wwdb_bindings[n.wwdbID]=window.setInterval(function(){o||(u(!0),c!=e[t]&&(s=e[t],c=s,n[a]=s,r&&r(e)),u(!1))},25),JMVC.events.on(n,"keyup",function(){i||(u(!0),this[a]!=e[t]&&(e[t]=this[a],s=this[a],c=this[a],r&&r(e)),u(!1))}),n[a]=c},wwoff:function(){for(var e=[].slice.call(arguments,0),t=e.length;t-- >0;)JMVC.events.off(e[t],"keyup"),window.clearInterval(_.events.wwdb_bindings[e[t].wwdbID])}},JMVC.events.doTab=function(e){e.onkeydown=function(e){var t,n,r,o,i,a,s,c,u,l=this;9==e.keyCode&&(t=l.value,n=e.shiftKey,r=l.selectionStart,o=l.selectionEnd,r!=o?(r=t.lastIndexOf("\n",r)+1,i="\n"==t[o-1],a=t.substring(0,r),s=t.substring(o-~~i),c=t.substring(r,o),n?("\t"==c[0]&&(c=c.substring(1)),c=c.split("\n\t").join("\n")):(c=c.split("\n"),i&&c.pop(),c="\t"+c.join("\n\t")),l.value=a+c+s,l.selectionStart=r,l.selectionEnd=r+c.length):(u=l.value,l.value=u.substring(0,r)+"\t"+u.substring(r),l.selectionEnd=l.selectionStart=r+1),e.preventDefault())}},JMVC.events.blurAllAnchorClicks(),Event.prototype.preventDefault||(Event.prototype.preventDefault=function(){this.returnValue=!1}),Event.prototype.stopPropagation||(Event.prototype.stopPropagation=function(){this.cancelBubble=!0}),_.head={},JMVC.head={element:WD.getElementsByTagName("head").item(0),addScript:function(e,t,n){var r,o,i,a=JMVC.head;return t?n?(i=JMVC.parse(e,!0),r=JMVC.dom.create("script",{type:"text/javascript"},i),r.onload=function(){o.removeChild(r)},o=a.element,o.appendChild(r)):JMVC.io.get(e,function(e){e=JMVC.parse(e,!0),r=JMVC.dom.create("script",{type:"text/javascript"},e),o=a.element,r.onload=function(){o.removeChild(r)},o.appendChild(r)},!0):(r=n?JMVC.dom.create("script",{type:"text/javascript"},e):JMVC.dom.create("script",{type:"text/javascript",src:e}," "),o=JMVC.head.element,r.onload=function(){o.removeChild(r)},o.appendChild(r)),r},addStyle:function(e,t,n,r){var o,i,a,s,c=JMVC.head;return t?n?(s=JMVC.parse(e,!0),i=c.element,o=WD.createElement("style"),a=WD.createTextNode(""+s),o.type="text/css",o.styleSheet?o.styleSheet.cssText=a.nodeValue:o.appendChild(a),r&&JMVC.dom.attr(o,"id",r),i.appendChild(o)):JMVC.io.get(e,function(e){e=JMVC.parse(e,!0),i=c.element,o=WD.createElement("style"),a=WD.createTextNode(""+e),o.type="text/css",o.styleSheet?o.styleSheet.cssText=a.nodeValue:o.appendChild(a),r&&JMVC.dom.attr(o,"id",r),i.appendChild(o)},!0):(o=JMVC.dom.create("link",{type:"text/css",rel:"stylesheet",href:e}),i=JMVC.head.element,i.appendChild(o)),o},denyiXrame:function(){return W.top!==W.self&&(W.top.location=JMVC.vars.baseurl)},favicon:function(e){JMVC.head.link("icon",{rel:"shortcut icon",href:JMVC.vars.baseurl+e})},goto:function(e,t,n){var r=[];e&&r.push(e),t&&r.push(t),n&&r.push(n),WD.location.href=JMVC.vars.baseurl+JMVC.US+r.join(JMVC.US)},lastModified:function(e){var t=JMVC.head.element.getElementsByTagName("meta"),n=JMVC.dom.create("meta",{"http-equiv":"last-modified",content:(e||JMVC.vars.last_modified||new Date).toString()}),r=t.length;r?JMVC.dom.insertAfter(n,t.item(r-1)):JMVC.head.element.appendChild(n)},lib:function(e){var t={jQuery:"https://code.jquery.com/jquery-3.1.1.min.js",jsapi:"https://www.google.com/jsapi",underscore:"http://underscorejs.org/underscore-min.js",prototype:"https://ajax.googleapis.com/ajax/libs/prototype/1.7.0.0/prototype.js",dropbox:"https://www.dropbox.com/static/api/dropbox-datastores-1.0-latest.js"};e in t&&JMVC.head.addScript(t[e])},link:function(e,t){t.rel=e,JMVC.dom.add(JMVC.head.element,"link",t)},linkin:function(){if("standalone"in window.navigator&&window.navigator.standalone){JMVC.events.on(document,"click",function(e){for(var t=e.target;"A"!==t.nodeName&&"HTML"!==t.nodeName;)t=t.parentNode;"href"in t&&(e.preventDefault(),document.location.href=t.href)}),JMVC.css.style(JMVC.WDB,"margin-bottom","15px");var e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),o=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div");JMVC.dom.addClass(e,"jmvc-spa-bottom-navigation group"),JMVC.dom.addClass(t,"back cnt respfixed"),JMVC.dom.addClass(n,"reload cnt respfixed"),JMVC.dom.addClass(r,"forward cnt respfixed"),JMVC.dom.append(t,o),JMVC.dom.append(n,i),JMVC.dom.append(r,a),JMVC.dom.append(e,t),JMVC.dom.append(e,n),JMVC.dom.append(e,r),JMVC.events.on(o,"click",function(){history.back()}),JMVC.events.on(i,"click",function(){document.location.href=document.location.href}),JMVC.events.on(a,"click",function(){history.forward()}),JMVC.dom.append(JMVC.WDB,e)}},meta:function(e,t,n){var r=JMVC.head.metas(),o=JMVC.dom.findByAttribute("name",e,r);if(n=!!n,o.length){if(!n)return!1;JMVC.dom.remove(o[0])}var i=JMVC.head.element.getElementsByTagName("meta"),a=JMVC.dom.create("meta",{name:e,content:t}),s=i.length;return s?JMVC.dom.insertAfter(a,i.item(s-1)):JMVC.head.element.appendChild(a)},metas:function(){return JMVC.array.coll2array(JMVC.WD.getElementsByTagName("meta"))},reload:function(){var e=JMVC.WD.location.href;WD.location.href=e},removeMeta:function(e){var t=JMVC.dom.findByAttribute("name",e,JMVC.head.metas());!!t.length&&JMVC.dom.remove(t[0])},title:function(e){return void 0===e?WD.title:(WD.title=e,WD.title)}},_.css={opera:navigator.userAgent.match(/opera\/([^\s]*)/i),mappedStyles:{},css2js_rule:function(e){return"-"===e[0]?e:e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},css3_map:["-o-transform","-moz-transform","-webkit-transform","-ms-transform"]},JMVC.css={clearer:function(){return JMVC.dom.create("br",{class:"clearer"})},addRule:function(e,t,n,r){JMVC.dom.isNode(e)&&(e=e.sheet?e.sheet:e.styleSheet),e.insertRule?e.insertRule(t+"{"+n+"}",r):e.addRule(t,n,r)},autoHeadings:function(){JMVC.head.addStyle("h1{font-size:24px !important; line-height:48px !important; padding:12px 0px 12px !important;}h2{font-size:20px !important; line-height:36px !important; padding:9px 0px 9px !important;}h3{font-size:16px !important; line-height:28px !important; padding:7px 0px 7px !important;}h4{font-size:12px !important; line-height:24px !important; padding:6px 0px 6px !important;}h5{font-size:10px !important; line-height:20px !important; padding:5px 0px 5px !important;}h6{font-size:8px !important; line-height:16px !important; padding:4px 0px 4px !important;}",!0,!0)},beResponsive:function(e){JMVC.dom[void 0===e||e?"addClass":"removeClass"](JMVC.WDB,"resp")},fontAwesome:function(){JMVC.head.addStyle("https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css")},getComputedStyle:function(e,t){if(_.css.opera)return JMVC.W.getComputedStyle(e,null).getPropertyValue(t);var n=void 0!==e.currentStyle?e.currentStyle:JMVC.WD.defaultView.getComputedStyle(e,null);return t?n[_.css.css2js_rule(t)]:n},getPosition:function(e,t){var n=0,r=0,o=JMVC.WD.body.scrollTop+JMVC.WD.documentElement.scrollTop,i=JMVC.WD.body.scrollLeft+JMVC.WD.documentElement.scrollLeft;if(e.offsetParent)do{n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent}while(e);return[t?n-i:n,t?r-o:r]},height:function(e){return e.offsetHeight||e.scrollHeight||JMVC.css.getComputedStyle(e,"height")},hide:function(e){if(e instanceof Array)for(var t=0,n=e.length;t<n;t+=1)JMVC.css.hide(e[t]);else JMVC.css.style(e,"display","none")},mappedStyle:function(e,t){var n=JMVC.dom.find("#"+e);n&&JMVC.dom.remove(n),_.css.mappedStyles[e]=JMVC.dom.create("style",{id:e,type:"text/css"},t),JMVC.dom.append(JMVC.head.element,_.css.mappedStyles[e])},mappedStyleRemove:function(e){e in _.css.mappedStyles&&JMVC.dom.remove(_.css.mappedStyles[e])},pest:function(){var e=JMVC.dom.find("#pest-css"),t=JMVC.dom.find("#pest-css-info");if(e&&t)return JMVC.events.off(JMVC.WD,"mousemove",i),JMVC.dom.remove(t),void JMVC.css.mappedStyleRemove("pest-css");var n=JMVC.dom.create("div",{id:"pest-css-info"}),r=~~JMVC.cookie.get("pestPanelPosition")||0,o=["tr","br","bl","tl"],i=function(e){var t,r,o=JMVC.events.eventTarget(e),i=JMVC.css.getComputedStyle(o),a={height:!0,width:!0,display:!0,cssFloat:!0,color:!0,backgroundColor:!0,fontSize:!0},s=document.createElement("ul"),c=function(e,n,r){t=document.createElement("li"),t.innerHTML=(n?"<strong>"+n+"</strong> : ":"")+r,e.appendChild(t)};if(o!==n){n.innerHTML="";for(var u in i)u in a&&c(s,u,i[u]);for(n.appendChild(s),n.appendChild(document.createElement("hr")),(o.id||o.className)&&(o.id&&c(s,"ID",o.id),o.className&&c(s,"CLASS",o.className),n.appendChild(s)),n.appendChild(document.createElement("hr")),r=document.createElement("ul");o&&o.tagName;)c(r,!1,o.tagName),o=o.parentNode;n.appendChild(r)}};n.className="report respfixed "+o[r],n.style.position="fixed",n.style.zIndex=999,JMVC.events.on(n,"mouseover",function(){var e=r;r=++r%o.length,JMVC.dom.switchClass(n,o[e],o[r]),JMVC.cookie.set("pestPanelPosition",r)}),JMVC.WD.body.appendChild(n),JMVC.css.mappedStyle("pest-css","* {outline : 1px dotted black !important; opacity : .7}*:hover {outline : 1px solid red !important; opacity:1 }.report {padding:10px; position:fixed; margin:10px; border:1px solid #333;}.report, .report *{opacity:1; line-height:14px; font-family:verdana, sans; font-size:9px; outline:0 !important; background-color:white;}.report.tl{top:0px; left:0px;}.report.tr{top:0px; right:0px;}.report.bl{bottom:0px; left:0px;}.report.br{bottom:0px; right:0px;}html , body , .report, .report *{opacity: 1}"),JMVC.events.on(JMVC.WD,"mousemove",i)},reset:function(){JMVC.head.addStyle("html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block;}body{line-height:1;}ol,ul{list-style:none;}blockquote,q{quotes:none;}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}table{border-collapse:collapse;border-spacing:0;}",!0,!0)},rotate:function(e,t){JMVC.css.style(e,{"-webkit-transform":"rotate("+t+"deg)","-moz-transform":"rotate("+t+"deg)","-o-transform":"rotate("+t+"deg)"})},show:function(e){if(e instanceof Array)for(var t=0,n=e.length;t<n;t+=1)JMVC.css.show(e[t]);else JMVC.css.style(e,"display","block")},style:function(e,t,n){var r,o,i="object"==typeof t&&void 0===n,a=!1;if(!i&&void 0===n)return a=e.currentStyle?e.currentStyle[_.css.css2js_rule(t)]:e.style[t],""===a||"auto"===a?JMVC.css.getComputedStyle(e,t):a;if(i)for(o in t)-1!==(t[o]+"").search(/rand/)&&(r=JMVC.nsCheck("JMVC.core.color")?JMVC.core.color.getRandomColor():"#000000",t[o]=t[o].replace(/rand/,r)),JMVC.array.find(_.css.css3_map,o)+1?e.style.cssText+=";"+o+" : "+t[o]:e.style[_.css.css2js_rule(o)]=t[o];else void 0!==n&&(n+="",-1!==n.search(/rand/)&&(r=JMVC.nsCheck("JMVC.core.color")?JMVC.core.color.getRandomColor():"#000000",n=n.replace(/rand/,r)),JMVC.array.find(_.css.css3_map,t)+1?e.style.cssText+=";"+t+" : "+n:(e.style[_.css.css2js_rule(t)]=n,"opacity"===t&&(e.style.filter="alpha(opacity = "+~~(100*JMVC.num.getFloat(n))+")")));return JMVC.css},unselectable:function(e){JMVC.css.style(e,{"-moz-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}),JMVC.dom.attr(e,{unselectable:"on",onselectstart:"return false;",onmousedown:"return false;"})},width:function(e){return e.offsetWidth||e.scrollWidth||JMVC.css.getComputedStyle(e,"width")}},_.array={op:function(e,t){var n=NaN;try{n=new Function("return "+e.join(t)+";")()}catch(e){}return n}},JMVC.array={clean:function(e){for(var t=-1,n=e.length;++t<n;)(undefined==e[t]||"number"==typeof e[t]&&isNaN(e[t]))&&(e.splice(t--,1),n--);return e},clone:function(e){return Array.prototype.slice.call(e,0)},coll2array:function(e){var t=[],n=0;try{t=[].slice.call(e,0)}catch(r){for(null;e[n];n++)t[n]=e[n]}return t},compare:function(e,t,n){if(e===t)return!0;if(null===e||null===t||e.length!==t.length)return!1;if(void 0!==n&&(e=e.sort(),t=t.sort()),JSON&&"stringify"in JSON)return JSON.stringify(e)===JSON.stringify(t);for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0},digForKey:function(e,t){return _.common.digFor("key",e,t)},digForValue:function(e,t){return _.common.digFor("value",e,t)},digForKeyValue:function(e,t){return _.common.digFor("keyvalue",e,t)},empty:function(e){[].splice.call(e,0,e.length)},find:function(e,t){if(e instanceof Array&&"indexOf"in e)return e.indexOf(t);for(var n=e.length-1;n>=0&&e[n]!==t;)n--;return n},findAll:function(e,t){for(var n,r=[],o=0;;){if((n=JMVC.array.find(e,t))<0)break;o+=n+1,r.push(o-1),e=e.slice(n+1)}return r.length?r:-1},findRich:function(e,t){var n=0,r=!1,o=e.length;for(null;n<o;n+=1)if((r={}.toString.call(e[n]).match(/\[object\s(Array|Object)\]/))&&JSON.stringify(e[n])===JSON.stringify(t)||!r&&e[n].toString()===t.toString())return n;return-1},fromArguments:function(e){return Array.prototype.slice.call(e,0)},max:function(e){return Math.max.apply(null,e)},mean:function(e){return JMVC.array.sum(e)/e.length},min:function(e){return Math.min.apply(null,e)},move:function(e,t,n){if(n>=e.length)for(var r=n-e.length;1+r--;)e.push(undefined);return e.splice(n,0,e.splice(t,1)[0]),e},mult:function(e){return _.array.op(e,"*")},rand:function(e){return e[Math.floor(Math.random()*e.length)]},range:function(e,t){for(var n=[];e<=t;)n.push(e++);return n},remove:function(e,t){for(var n=e.length;n--;)e[n]===t&&e.splice(n,1);return e},shuffle:function(e){for(var t,n,r=e.length,o=0;o<r;)t=~~(r*Math.random()),n=e[o],e[o++]=e[t],e[t]=n;return e},sum:function(e){return _.array.op(e,"+")},unique:function(e){var t,n=[],r=e.length,o=0;for(o=0;o<r;o++){for(t=o+1;t<r;t++)e[o]===e[t]&&(t=++o);n.push(e[o])}return n}},_.string={charToEntity:{},entities:{__proto__:null,apos:39,quot:34,amp:38,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,
Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830}},JMVC.string={code2str:function(e){return String.fromCharCode.apply(null,e)},camelCase2hypenCase:function(e){return e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()},escapeEntities:function(e){return e.replace(/[^\x20-\x7E]/g,function(e){return _.string.charToEntity[e]?"&"+_.string.charToEntity[e]+";":e})},multireplace:function(e,t){for(var n in t)e=e.replace(t[n],n);return e},nl2br:function(e){return e.replace(/\/n/gm,"<br />")},padme:function(e,t,n,r){var o=e.length;return r=r||2,n=n||"post",r<=o?e:(t=new Array(r+1-o).join(t)+"",String({pre:t+e,post:e+t}[n])||e)},regEscape:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},repeat:function(e,t){return new Array(t+1).join(e)},replaceAll:function(e,t,n){var r,o,i,a="%",s="%",c=null,u=!1,l=!0;undefined!=n&&("delim"in n&&(a=n.delim[0],s=n.delim[1]),"fb"in n&&(c=n.fb),u=!!n.clean),r=new RegExp(a+"(\\+)?([A-z0-9-_.]*)"+s,"g");for(;l;){if(!e.match(r))return e;e=e.replace(r,function(e,n,r,d){if("function"==typeof t)o=t(r),d=o!==a+r+s?t(r):r;else if(r in t)d=typeof t[r],d="function"===d?t[r](r):"object"===d?"":t[r];else{if(r.match(/\./)&&(i=JMVC.nsCheck(r,t)))return d=n?encodeURIComponent(i):i,"function"==typeof i?i(r):i;l=!1,d=null!==c?c:u?"":a+r+s}return n?encodeURIComponent(d):d})}return e},str2code:function(e){for(var t=[],n=0,r=e.length;n<r;)t.push(e.charCodeAt(n)),n+=1;return t},str2hex:function(e){for(var t=[],n=0,r=e.length;n<r;)t.push("\\X"+parseInt(e.charCodeAt(n),10).toString(16).toUpperCase()),n+=1;return""+t.join("").replace(/X/g,"x")},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},triml:function(e){return e.replace(/^\s+/g,"")},trimr:function(e){return e.replace(/\s+$/g,"")},ucFirst:function(e){return e.replace(/^\w/,function(e){return e.toUpperCase()})},unescapeEntities:function(e){return e.replace(/&(.+?);/g,function(e,t){return String.fromCharCode("#"!==t[0]?_.string.entities[t]:"x"===t[1]?parseInt(t.substr(2),16):parseInt(t.substr(1),10))})}};for(var entityName in _.string.entities)_.string.charToEntity[String.fromCharCode(_.string.entities[entityName])]=entityName;if(_.object={reduce:function(e,t){var n,r="";for(n in e)e.hasOwnProperty(n)&&(r+=t(e,n,r));return r}},JMVC.object={_clone:function(e){var t,n;if(null===e||"object"!=typeof e)return e;t=e.constructor();for(n in e)e.hasOwnProperty(n)&&(t[n]=JMVC.object.clone(e[n]));return t},clone:function(e){var t,n,r,o=JMVC.object;if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return t=new Date,t.setTime(e.getTime()),t;if(e instanceof Array){for(t=[],n=0,r=e.length;n<r;n++)t[n]=o.clone(e[n]);return t}if(e instanceof Object){t={};for(n in e)e.hasOwnProperty(n)&&(t[n]=o.clone(e[n]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")},compare:function(e,t,n,r){if(void 0===n&&(n=!0),!n)return 0;if(e+""!=t+"")return!1;if(e===t)return!0;for(r in e)if(!(n=n&&t[r]&&JMVC.object.compare(e[r],t[r],n)))return!1;for(r in t)if(!(n=n&&e[r]&&JMVC.object.compare(t[r],e[r],n)))return!1;return n},contains:function(e,t){return"object"==typeof e&&t in e},digForKey:function(e,t,n){return _.common.digFor("key",e,t,n)},digForValue:function(e,t,n){return _.common.digFor("value",e,t,n)},digForKeyValue:function(e,t,n){return _.common.digFor("keyvalue",e,t,n)},extend:function(e,t,n){var r,o=JMVC.object.clone(e);for(r in t)!t.hasOwnProperty(r)||r in o&&!n||(o[r]=t[r]);return o},fromQs:function(){var e,t,n,r=document.location.search.substr(1).split("&"),o={};for(e=0,t=r.length;e<t;e+=1)n=r[e].split("="),!o[n[0]]&&(o[n[0]]=W.decodeURIComponent(n[1]));return o},isEmpty:function(e){var t;for(t in e)return!1;return!0},jCompare:function(e,t){return"undefined"!=typeof JSON?JSON.stringify(e)===JSON.stringify(t):e==t},keys:function(e){var t,n=[];for(t in e)n.push(t);return n},order:function(e){var t,n,r,o=[],i={};for(t in e)o.push(t);for(o.sort(),n=0,r=o.length;n<r;n++)i[o[n]]=e[o[n]];return i},orderBy:function(e,t,n){function r(e){var t=typeof e;return"number"==t?e:"string"==t?e.toLowerCase():e}return n=n?function(e){return!!e}:function(e){return!e},e.sort(function(e,o){return n(r(e[t])>r(o[t]))})},toAttr:function(e){return _.object.reduce(e,function(e,t){return" "+t+(e[t]?'="'+e[t]+'"':"")})},toCss:function(e,t){return _.object.reduce(e,function(e,n){return t?n+"{"+e[n]+"} ":n+" {"+_.object.reduce(e[n],function(e,t){return t+":"+e[t]+";"})+"} "})},toQs:function(e){return _.object.reduce(e,function(e,t,n){return((n?"&":"?")+encodeURIComponent(t)+"="+encodeURIComponent(e[t])).replace(/\'/g,"%27")})},toStr:function(e){return _.object.reduce(e,function(e,t){return t+":"+e[t]+";"})},values:function(e){var t,n=[];for(t in e)n.push(e[t]);return n}},_.match={rex:{email:new RegExp(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),url:new RegExp(/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i),alfa:new RegExp(/^[A-z]*$/),numint:new RegExp(/^[0-9]*$/),floatnum:new RegExp(/^[0-9\.]*$/),alfanum:new RegExp(/^[A-z0-9]*$/)}},JMVC.match={email:function(e){return e.match(_.match.rex.email)},url:function(e){return e.match(_.match.rex.url)},alfa:function(e,t,n){return n&&t>n&&(n=t),e.match(new RegExp("^[A-zs]"+(~~t?"{"+t+","+(~~n?n:"")+"}":"*")+"$"))},alfanum:function(e){return e.match(_.match.rex.alfanum)},floatnum:function(e){return(e+"").match(_.match.rex.floatnum)}},_.num={},JMVC.num={getNum:function(e){return parseInt(e,10)},getFloat:function(e){return parseFloat(e,10)},pFloat:function(e){return 1*e},pInt:function(e){return e>>0},mRound:function(e){return e+.5>>0},mFloor:function(e){return e>>0},mFloor2:function(e){return 0|e},mCeil:function(e){return e+(e>0&&!!(e%1))>>0},num:function(e){return parseFloat(e.toFixed(10),10)},dec2Bin:function(e){return e>0?e.toString(2)>>>0:(e=Math.abs(e),(1+(e^parseInt(new Array(e.toString(2).length+1).join("1"),2))).toString(2)>>>0)},bin2Dec:function(e){return parseInt(e>>>0,2)},sgn:function(e){return e>=0?1:-1}},_.events.drag={gd1:!1,getDirection:function(e){var t,n=this.gd1,r=JMVC.events.coord(e),o=["o","no","no","n","n","ne","ne","e","e","se","se","s","s","so","so","o"];return t=parseFloat((180*Math.atan2(r[1]-n[1],r[0]-n[0])/Math.PI).toFixed(3),10),t<0&&(t+=360),JMVC.events.drag.direction=t,JMVC.events.drag.orientation=o[~~((t+180)%360/22.5)],!0}},JMVC.events.drag={direction:!1,orientation:!1,on:function(e,t){var n=t.start||function(){},r=t.move||function(){},o=t.end||function(){},i=function(e){_.events.drag.getDirection(e);var t=JMVC.events.coord(e),n=Math.sqrt((t[1]-_.events.drag.gd1[1])*(t[1]-_.events.drag.gd1[1])+(t[0]-_.events.drag.gd1[0])*(t[0]-_.events.drag.gd1[0]));r.call(e,e,{start:_.events.drag.gd1,current:t,direction:JMVC.events.drag.direction,orientation:JMVC.events.drag.orientation,distance:n})},a=function(t){JMVC.events.off(e,"mousemove"),JMVC.events.off(e,"touchmove");var n=JMVC.events.coord(t),r=Math.sqrt((n[1]-_.events.drag.gd1[1])*(n[1]-_.events.drag.gd1[1])+(n[0]-_.events.drag.gd1[0])*(n[0]-_.events.drag.gd1[0]));o.call(t,t,{start:_.events.drag.gd1,current:JMVC.events.coord(t),direction:JMVC.events.drag.direction,orientation:JMVC.events.drag.orientation,distance:r})};JMVC.events.on(e,"mousedown",function(t){_.events.drag.gd1=JMVC.events.coord(t),n.call(t,t,{start:_.events.drag.gd1}),JMVC.events.on(e,"mousemove",i)}),JMVC.events.on(e,"mouseup",a),JMVC.events.on(e,"touchstart",function(t){_.events.drag.gd1=JMVC.events.coord(t),n.call(t,t,{start:_.events.drag.gd1}),JMVC.events.on(e,"touchmove",i)}),JMVC.events.on(e,"touchend",a)},off:function(e,t){JMVC.events.on(e,"mouseup",t),JMVC.events.on(e,"touchend",t)}},_.shimthags="canvas,audio,video,source,track,embed,datalist,keygen,output,header,nav,section,main,article,aside,footer,details,summary,figure,figcaption,mark,time,bdi,wbr,dialog,meter,progress,ruby,rt,rp",null!==document.doctype){var node=document.doctype,doctype_string="<!DOCTYPE "+node.name+(node.publicId?' PUBLIC"'+node.publicId+'"':"")+(!node.publicId&&node.systemId?" SYSTEM":"")+(node.systemId?' "'+node.systemId+'"':"")+">",t,l;if("<!DOCTYPE html>"!==doctype_string){for(t=_.shimthags.split(","),l=t.length;l--;)document.createElement(t[l]);JMVC.head.addStyle(_.shimthags+"{display:block}",!0,!0)}}!function(){var e=0,t=JMVC.modules.length;if(!W.JMVCshut){for(;e<t;)JMVC.require(JMVC.modules[e++]);JMVC.p.lang&&JMVC.cookie.set("lang",JMVC.p.lang)}try{W.JMVCshut?JMVC.loaded=!0:JMVC.render()}catch(e){return JMVC.Errors.notify(e)}}(),"undefined"!=typeof JMVCshut&&function(e){"function"==typeof define&&define.amd&&define(function(){return JMVC})}()}(this);