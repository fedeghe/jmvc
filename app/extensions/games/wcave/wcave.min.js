JMVC.head.addStyle(JMVC.vars.baseurl+"/app/extensions/games/wcave/wcave.css"),JMVC.head.addStyle(JMVC.vars.baseurl+"/app/extensions/games/wcave/freckle.css",!0),!function(e){"use strict";var t,n=function(){},o=!1,s=function(t){o?e.console.error("A Wcave instance exists yet!!! "+a.version):o=(new n).init(t)},r=e.document,a={urlE:encodeURIComponent(document.location.href),score:0,bonus:0,wormQueue:[],cnt:null,canvas:null,canvasHeight:0,canvasWidth:0,ctx:null,active:!1,gameover:!1,bound_pairs:[],Yoffset:0,Xoffset:0,versus:-1,cursor:0,xB:0,vB:15,lastSteep:0,obstacles:[],ppills:[],audio:null,messagePanel:null,tunnelCollisionIndex:0,paused:!1,freezeBgIndex:0,freezeBgLength:0,feverMode:!1,feverCount:0,feverIndexes:[],missedPpills:0,cbacks:{gameover:function(){},gamestart:function(){},scoreupdate:function(){}}},i={gameName:"Wcave",wormSize:.015,wormHead:.16,wormLenght:8,minStep:.5,maxStep:1.5,speed:.018,freq:25,initHeight:.95,stepDecay:.98,collision:!0,obstacleSize:.1,minSteep:-.7,maxSteep:.7,maxSteepVariation:.5,audiointro:JMVC.vars.baseurl+"/media/audio/revolve.ogg",audioid:"au",ppillsSize:.015,theme:"matrix",stopHeightDecay:3,doomObstacles:3,freezeDecay:!1,real:{},hsContainerId:"hscontainer",hardRestart:!1,blinkrate:2,ppillsStrictCatch:!1,colors:{matrix:{worm:["#00ff00","#003300"],bg:["#000000","#00ff00","#000000"],freezebg:["#555555","#333333"],tunnel:"#000000",obstacles:"#ffffff",hpills:"#00ff00",feverHead:["#FF0000","#00FF00","#0000FF"],feverBonus:["#FF0000","#00FF00","#0000FF"],ppills:["#FF0000","#00FF00","#0000FF"]},matrix2:{worm:["#ffff00","#330000"],bg:["#0000ff","#ffff00","#fede76"],freezebg:["#555555","#333333"],tunnel:"#555555",obstacles:"#ffffff",hpills:"#00ff00",feverHead:["#FFFF00","#0fFFf0","#ff00FF"],feverBonus:["#FF0000","#00FF00","#0000FF"],ppills:["#0000","#ffFF00","#ffffFF"]}},g:1.4,tpl:{start:'<h1>%gameName%</h1><div id="intro"><div id="introtext"><ul><li>Hold mouse to move up, release to move down</li><li>stay away from <span class="white">big white</span> rounded blocks</li><li>catch <span class="rgb1">r</span><span class="rgb2">g</span><span class="rgb3">b</span> rounded pills for points</li><li>%wormLength% consecutive pills enable <span class="ks" id="fmode">fever mode</span></li><li>clean the cave hitting <span class="ks">d</span> (%doomObstacles% available); pause/resume with <span class="ks">p</span></li></ul></div></div><input id="start" type="button" value="START"/>',gameover:'<h1>%gameName%</h1><div id="outro"><p>You scored <span>%score%</span> points</p><div id="%hscontainerid%"></div></div><input id="restart" type="button" value="PLAY AGAIN" />'}},l={fever_colors_length:0,fever_bonus_length:0,feverGradients:[],origVars:0,origConf:0,bindings:[],time:0};e.onerror=function(t,n,o){e.console.error("JavaScript error: '"+t+"' on "+n+"@"+o)},n.prototype.restart=function(){e._gaq&&_gaq.push(["_trackEvent","Game","Restat","another game"]),i.hardRestart?e.document.location.reload():(e.clearInterval(l.panelBlink),e.document.getElementById(l.opts.id).innerHTML="",a=l.origVars,i=l.origConf,this.unbindall(),o=null,s(l.opts))},n.prototype.error=function(e){var t=r.createElement("div");t.className="err",t.innerHTML=e,r.body.appendChild(t)},n.prototype.ppillsScore=function(){a.feverMode=a.feverCount>=i.wormLenght,a.score+=a.feverMode?2:1},n.prototype.init=function(){t=this;var n=null,o=null,s=null,c=null,p=null,u=0;for(l.opts=Array.prototype.pop.call(arguments),l.origVars=t.utils.clone(a),l.origConf=t.utils.clone(i),l.fever_colors_length=i.colors[i.theme].feverHead.length,l.fever_bonus_length=i.colors[i.theme].feverBonus.length,i.ppillsStrictCatch?(t.checkFeverAlive=function(){a.ppills.length&&a.ppills[0].left+a.Xoffset<a.real.wormHead&&(a.feverCount=0,a.missedPpills+=1)},t.clearPpills=function(){a.ppills.length&&a.ppills[0].left+a.Xoffset<0&&a.ppills.splice(0,1)}):(t.checkFeverAlive=function(){a.ppills.length&&a.ppills[0].left+a.Xoffset<0&&(a.feverCount=0,a.missedPpills+=1,a.ppills.splice(0,1))},t.clearPpills=function(){}),a.wormColors=t.utils.getGradientArray(i.colors[i.theme].worm[0],i.colors[i.theme].worm[1],i.wormLenght-2),null;u<l.fever_colors_length;u+=1)l.feverGradients[u]=t.utils.getGradientArray(i.colors[i.theme].feverHead[u],"#111111",i.wormLenght-2);return a.freezeBgLength=i.colors[i.theme].freezebg.length,l.opts?"undefined"==typeof l.opts.id?(t.error("No id passed!"),!1):"undefined"==typeof l.opts.size&&"number"!=typeof(l.opts.w*l.opts.h)?(t.error("No size info passed!"),!1):(l.opts.cbacks&&l.opts.cbacks.gameover&&"function"==typeof l.opts.cbacks.gameover&&(a.cbacks.gameover=l.opts.cbacks.gameover),l.opts.cbacks&&l.opts.cbacks.gamestart&&"function"==typeof l.opts.cbacks.gamestart&&(a.cbacks.gamestart=l.opts.cbacks.gamestart),l.opts.cbacks&&l.opts.cbacks.scoreupdate&&"function"==typeof l.opts.cbacks.scoreupdate&&(a.cbacks.scoreupdate=l.opts.cbacks.scoreupdate),o=l.opts.id,s=l.opts.w,c=l.opts.h,p=l.opts.size,t.cnt=r.getElementById(o),t.cnt?("undefined"==typeof l.opts.obstacles||l.opts.obstacles||(a.obstacles=!1),"undefined"==typeof l.opts.ppills||l.opts.ppills||(a.ppills=!1),i.doomObstacles="undefined"==typeof l.opts.doom||l.opts.doom?l.opts.doom||i.doomObstacles:!1,l.opts.hpills&&(a.hpills=[]),p&&"auto"===p&&(n=t.utils.getScreenSize(),s=parseInt(n.w,10),c=parseInt(n.h,10)),t.utils.stilize(t.cnt,{width:s+"px",height:c+"px"}),a.canvasWidth=s,a.canvasHeight=c,t.cnt.className="cnt",t.container=r.createElement("div"),t.cnt.appendChild(t.container),t.utils.stilize(t.container,{position:"relative",width:s+"px",height:c+"px",overflow:"hidden"}),t.canvas=e.document.createElement("canvas"),t.canvas.setAttribute("width",s),t.canvas.setAttribute("height",c),t.utils.stilize(t.canvas,{position:"absolute",width:s+"px",height:c+"px",left:"0px",top:"0px",zIndex:100}),t.container.appendChild(t.canvas),t.ctx=t.canvas.getContext("2d"),t.messagePanel=r.createElement("div"),t.messagePanel.setAttribute("id","panel"),t.utils.stilize(t.messagePanel,{position:"relative",width:s/2+"px",left:s/4+"px"}),t.utils.attr(t.messagePanel,{"class":"panel"}),t.messagePanel.innerHTML=t.utils.replaceAll(i.tpl.start,{gameName:i.gameName,wormLength:i.wormLenght,doomObstacles:i.doomObstacles}),t.container.appendChild(t.messagePanel),t.utils.stilize(t.messagePanel,{top:(a.canvasHeight-t.messagePanel.clientHeight)/2+"px"}),u=e.document.getElementById("fmode"),l.panelBlink=e.setInterval(function(){u.style.color=i.colors[i.theme].feverHead[+new Date%l.fever_colors_length]},20),a.real={wormSize:t.canvas.height*i.wormSize,wormHead:t.canvas.width*i.wormHead,initHeight:t.canvas.height*i.initHeight,obstacleSize:t.canvas.height*i.obstacleSize,speed:t.canvas.width*i.speed,ppillsSize:t.canvas.height*i.ppillsSize},t.initTunnel(),("undefined"==typeof l.opts.sound||!!l.opts.sound)&&t.initAudio(),"undefined"!=typeof l.opts.collision&&!l.opts.collision&&(i.collision=!1),t.panelBind(),t.drawBg(),t.drawTunnel(),t):(t.error("no container #"+o+" found."),!1)):(t.error("No options passed!"),!1)},n.prototype.initTunnel=function(){var e,n,o,s,r=a.canvasWidth/2,l=a.canvasHeight,c=a.canvasWidth,p=a.real.initHeight,u=!1,f=0;for(a.bound_pairs.push({left:0,t1:(l-p)/2,t2:(l+p)/2}),a.bound_pairs.push({left:c/2,t1:(l-p)/2,t2:(l+p)/2}),f=a.bound_pairs.length;!u;)o=a.bound_pairs[f-1],r+=c*t.utils.rand(i.minStep,i.maxStep),s=o.t1+l*t.utils.rand(i.minSteep,i.maxSteep),e=s,n=s+(o.t2-o.t1)*i.stepDecay,a.bound_pairs.push({left:r,t1:e,t2:n}),f+=1,u=a.bound_pairs[f-2].left>Math.abs(a.Xoffset)+c},n.prototype.initAudio=function(){i.audiointro&&(a.audio=r.createElement("audio"),t.utils.attr(a.audio,{id:i.audioid,loop:""}),a.audio.appendChild(t.utils.attr(r.createElement("source"),{type:"audio/ogg",src:i.audiointro})),t.container.appendChild(a.audio),a.audio.play())},n.prototype.panelBind=function(){var e=(r.getElementById("toggleHs"),r.getElementById("start")),n=function(e){t.canvas.style.cursor="none",t.utils.killEvent(e),t.messagePanel.style.display="none",a.active=!0,t.gameBind(),a.cbacks.gamestart.call(t),t.run()};t.utils.bind(e,"click",n),l.bindings.push([e,"click",n])},n.prototype.resume=function(){t.run()},n.prototype.gameBind=function(){var e=function(){return t.cnt.blur(),a.gameover?!1:a.active?(t.g_reinit(),a.versus=1,void(a.cursor=0)):void(a.active=!0)},n=function(){return t.cnt.blur(),a.gameover?!1:(t.g_reinit(),a.versus=-1,void(a.cursor=0))},o=function(e){return 68!==e.keyCode&&100!==e.charCode&&112!==e.keyCode&&112!==e.charCode},s=function(t){o(t)&&e(t)},c=function(e){o(e)&&n(e)},p=function(e){if(!a.gameover)switch(e.keyCode){case 80:a.paused=!a.paused,!a.paused&&t.resume(),e.stopPropagation();break;case 68:i.doomObstacles&&(i.doomObstacles-=1,t.ctx.fillStyle="#FFFFFF",t.ctx.fillRect(0,0,t.canvas.width,t.canvas.height),a.obstacles=[],a.ppills=[],e.stopPropagation())}};t.utils.bind(t.cnt,"mousedown",e),t.utils.bind(t.cnt,"mouseup",n),t.utils.bind(t.cnt,"touchstart",e),t.utils.bind(t.cnt,"touchend",n),t.utils.bind(r,"keypress",s),t.utils.bind(r,"keyup",c),t.utils.bind(r,"keydown",p),l.bindings.push([t.cnt,"mousedown",e]),l.bindings.push([t.cnt,"mouseup",n]),l.bindings.push([t.cnt,"touchstart",e]),l.bindings.push([t.cnt,"touchend",n]),l.bindings.push([r,"keypress",s]),l.bindings.push([r,"keyup",c]),l.bindings.push([r,"keydown",p])},n.prototype.unbindall=function(){var e=l.bindings,n=0,o=e.length;for(null;o>n;n+=1)t.utils.unbind(e[n][0],e[n][1],e[n][2])},n.prototype.g_reinit=function(){a.xB=a.xB+a.vB*a.cursor+.5*a.versus*i.g*a.cursor*a.cursor,a.vB=a.vB+a.versus*i.g*a.cursor},n.prototype.ypos=function(){return a.Yoffset=a.xB+a.vB*a.cursor+.5*a.versus*i.g*a.cursor*a.cursor,t},n.prototype.xpos=function(){return a.Xoffset-=a.real.speed,t},n.prototype.xypos=function(){return t.xpos().ypos()},n.prototype.updateCursor=function(){a.cursor+=1},n.prototype.update=function(){e.setTimeout(function(e){e.run()},i.freq,t)},n.prototype.run=function(){l.time+=1,t.utils.queueCall.apply(t,["updateCursor","xypos","drawBg","drawTunnel","drawScore","drawObstacles","drawWorm","drawPills","drawDoomObstacles",[i.collision,"checkCollisions"],[a.active&&!a.paused,"update"],[!a.active,"gameOver"]])},n.prototype.drawScore=function(){var e=t.ctx.strokeStyle;t.ctx.strokeStyle="#ffffff",t.ctx.fillStyle="#000000",t.ctx.lineWidth=2,t.ctx.font="bold 50px 'Freckle Face',Verdana",t.ctx.textBaseline="top",t.ctx.strokeText(t.utils.formatScore(a.score),5,5),t.ctx.strokeStyle=e,a.cbacks.scoreupdate.call(t,a.score)},n.prototype.checkCollisions=function(){var e,n,o,s,r=t.ctx.getImageData(a.real.wormHead+a.real.wormSize+1,t.canvas.height/2,1,1),l=r.data,c=t.ctx.getImageData(a.real.wormHead+a.real.wormSize+2,t.canvas.height/2,1,1),p=c.data,u=t.utils.rgb2hex(l[0],l[1],l[2]),f=t.utils.rgb2hex(p[0],p[1],p[2]),d=function(){a.active=!1,a.gameover=!0};return a.obstacles&&a.obstacles.length&&(n=a.obstacles[0],s=t.canvas.height/2,a.real.wormHead-n[0]+a.Xoffset<a.real.speed/2&&a.real.wormHead-n[0]+a.Xoffset>0&&n[1]+a.Yoffset-a.real.obstacleSize/2<s&&s<n[1]+a.Yoffset+a.real.obstacleSize/2&&d()),a.ppills&&a.ppills.length&&(o=a.ppills[0],t.utils.pdistance(a.real.wormHead,t.canvas.height/2,o.left+a.Xoffset,o.top+a.Yoffset)<4*a.real.wormSize)?(a.feverCount+=1,t.ppillsScore(),void t.removePpills()):void(u!==i.colors[i.theme].tunnel&&(e=u)&&f!==i.colors[i.theme].tunnel&&(e=f)&&d())},n.prototype.drawDoomObstacles=function(){var e=t.ctx.strokeStyle,n="",o=0;for(null;o<i.doomObstacles;o+=1)n+="* ";t.ctx.strokeStyle="#ffffff",t.ctx.fillStyle="#000000",t.ctx.lineWidth=1,t.ctx.font="20px 'Freckle Face',Verdana",t.ctx.textBaseline="top",t.ctx.strokeText(n,5,60),t.ctx.strokeStyle=e},n.prototype.drawBg=function(){var e=t.ctx.createLinearGradient(0,0,t.canvas.width,0),n=1/(i.colors[i.theme].bg.length-1);e.addColorStop(0,i.colors[i.theme].bg[0]),e.addColorStop(n,a.freezeDecay?i.colors[i.theme].freezebg[~~(l.time/i.blinkrate)%a.freezeBgLength]:i.colors[i.theme].bg[1]),e.addColorStop(2*n,i.colors[i.theme].bg[2]),a.freezeBgIndex+=1,a.freezeBgIndex%=a.freezeBgLength,t.ctx.fillStyle=e,t.ctx.fillRect(0,0,t.canvas.width,t.canvas.height)},n.prototype.drawWorm=function(){var e,n,o=a.feverCount;for(e=0,n=i.wormLenght;n>e;e+=1)t.ctx.beginPath(a.real.wormHead-e*a.real.speed,a.Yoffset+t.canvas.height/2-a.wormQueue[e]),t.ctx.arc(a.real.wormHead-e*a.real.speed,a.Yoffset+t.canvas.height/2-a.wormQueue[e],a.real.wormSize,0,2*Math.PI,!0),t.ctx.fillStyle=o?l.feverGradients[(~~(l.time/i.blinkrate)+e)%l.fever_colors_length][e]:a.wormColors[e],o&&(o-=1),t.ctx.lineWidth=1,t.ctx.closePath(),t.ctx.fill();t.checkWorm()},n.prototype.checkWorm=function(){a.wormQueue.splice(0,0,a.Yoffset),a.wormQueue.length>i.wormLenght&&a.wormQueue.pop()},n.prototype.drawTunnel=function(){var e=0,n=a.bound_pairs,o=n.length,s=30;for(t.ctx.fillStyle=i.colors[i.theme].tunnel,t.ctx.strokeStyle=i.colors[i.theme].tunnel,t.ctx.lineWidth=0,null;o-1>e;e+=1)t.ctx.beginPath(),t.ctx.moveTo(t.canvas.width/2,s),t.ctx.lineTo(n[e].left+a.Xoffset,n[e].t1+a.Yoffset),t.ctx.stroke(),t.ctx.closePath(),t.ctx.beginPath(),t.ctx.moveTo(t.canvas.width/2,t.canvas.height-s),t.ctx.lineTo(n[e].left+a.Xoffset,n[e].t2+a.Yoffset),t.ctx.stroke(),t.ctx.closePath(),t.ctx.beginPath(),t.ctx.moveTo(n[e].left-1+a.Xoffset,n[e].t1+a.Yoffset),t.ctx.lineTo(n[e+1].left+a.Xoffset,n[e+1].t1+a.Yoffset),t.ctx.lineTo(n[e+1].left+a.Xoffset,n[e+1].t2+a.Yoffset),t.ctx.lineTo(n[e].left-1+a.Xoffset,n[e].t2+a.Yoffset),t.ctx.stroke(),t.ctx.closePath(),t.ctx.fill(),n[e].left-1+a.Xoffset<a.real.wormHead&&a.real.wormHead<=n[e+1].left+a.Xoffset&&(a.collisionTunnelIndex=e);this.checkTunnel()},n.prototype.checkTunnel=function(){function e(){a.bound_pairs.splice(0,1)}function n(){var e,n,o,s,r=a.bound_pairs.length,l=a.bound_pairs[r-1],c=t.utils.rand(i.minSteep,i.maxSteep);Math.abs(a.lastSteep-c)>i.maxSteepVariation&&(c=t.utils.randSign()*t.utils.rand(a.lastSteep,i.maxSteepVariation),a.lastSteep=c),e=l.t1+a.canvasHeight*c,n=l.left+a.canvasWidth*t.utils.rand(i.minStep,i.maxStep),o=e,s=e+l.t2-l.t1,!a.freezeDecay&&(a.obstacles&&l.t2-l.t1>a.real.obstacleSize*i.stopHeightDecay||!a.obstacles&&l.t2-l.t1>a.real.obstacleSize)?s=e+(l.t2-l.t1)*i.stepDecay:a.freezeDecay=!0,a.bound_pairs.push({left:n,t1:o,t2:s}),t.onAddedBound()}var o=a.bound_pairs.length,s=a.bound_pairs[1],r=a.bound_pairs[o-2];s.left+a.Xoffset<0&&e(),r.left+a.Xoffset<a.canvasWidth&&n()},n.prototype.onAddedBound=function(){var e,n,o,s=a.bound_pairs.length,r=a.bound_pairs[s-1],l=a.bound_pairs[s-2];a.obstacles&&a.obstacles.push([r.left,t.utils.rand(r.t1+a.real.obstacleSize/2,r.t2-a.real.obstacleSize/2)]),a.ppills&&(e=(r.left+l.left)/2,n=(r.t1+l.t2)/2+.8*t.utils.randSign()*t.utils.rand(0,r.t2-r.t1)/2,o={left:e,top:n,getRandomColor:function(){var e=0,t=i.colors[i.theme].ppills;return o.getRandomColor=function(){return e+=1,t[~~(e/i.blinkrate)%t.length]},t[e]}},a.ppills.push(o))},n.prototype.drawObstacles=function(){var e,n;for(a.obstacles.length&&a.obstacles[0][0]+a.Xoffset<0&&a.obstacles.splice(0,1),t.ctx.fillStyle=i.colors[i.theme].obstacles,e=0,n=a.obstacles.length;n>e;e+=1)t.roundRect(a.obstacles[e][0]+a.Xoffset-a.real.obstacleSize/2,a.obstacles[e][1]+a.Yoffset-a.real.obstacleSize/2,a.real.obstacleSize/2,a.real.obstacleSize)},n.prototype.roundRect=function(e,n,o,s,r){r=r||20,t.ctx.beginPath(),t.ctx.moveTo(e+r,n),t.ctx.lineTo(e+o-r,n),t.ctx.quadraticCurveTo(e+o,n,e+o,n+r),t.ctx.lineTo(e+o,n+s-r),t.ctx.quadraticCurveTo(e+o,n+s,e+o-r,n+s),t.ctx.lineTo(e+r,n+s),t.ctx.quadraticCurveTo(e,n+s,e,n+s-r),t.ctx.lineTo(e,n+r),t.ctx.quadraticCurveTo(e,n,e+r,n),t.ctx.closePath(),t.ctx.stroke(),t.ctx.fill()},n.prototype.removePpills=function(){a.ppills.splice(0,1)},n.prototype.drawPills=function(){function e(e,n,o){t.ctx.beginPath(e,n),t.ctx.arc(e,n,a.real.ppillsSize,0,2*Math.PI,!0),t.ctx.fillStyle=o.getRandomColor(),t.ctx.lineWidth=1,t.ctx.closePath(),t.ctx.fill()}var n,o;for(t.checkFeverAlive(),t.clearPpills(),t.ctx.fillStyle=i.colors[i.theme].ppills,n=0,o=a.ppills.length;o>n;n+=1)e(a.ppills[n].left+a.Xoffset-a.real.ppillsSize/2,a.ppills[n].top+a.Yoffset-a.real.ppillsSize/2,a.ppills[n])},n.prototype.gameOver=function(){return t.messagePanel.innerHTML=t.utils.replaceAll(i.tpl.gameover,{gameName:i.gameName,score:t.utils.formatScore(a.score)}),t.utils.fadeIn(t.messagePanel),t.utils.bind(r.getElementById("restart"),"click",function(){t.restart()}),t.utils.stilize(t.canvas,{cursor:"default"}),a.cbacks.gameover.call(t,a.score),!1},n.prototype.utils={queueCall:function(){var e=0,t=arguments,n=t.length;for(null;n>e;e+=1)t[e]instanceof Array?t[e][0]&&this[t[e][1]].call(this):this[t[e]].call(this)},clone:function(e){var t,n;if(null===e||"object"!=typeof e)return e;t=e.constructor();for(n in e)e.hasOwnProperty(n)&&(t[n]=this.clone(e[n]));return t},fadeIn:function(t){var n,o=.02,s=o;t.style.opacity=o,t.style.display="block",n=e.setInterval(function(){s+=o,t.style.opacity=s,s>=1&&(t.style.opacity=1,e.clearInterval(n))},10)},formatScore:function(e){e=String(e);for(var t=[],n=e.length-1,o=0;n>=0;)o%3===0&&o&&t.splice(0,0,"."),t.splice(0,0,e[n]),o+=1,n-=1;return t.join("")},orderJsonBy:function(){},stilize:function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);return e},attr:function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n]);return e},makeNS:function(t,n,o){var s,r=this,a=".",i=t.split(a),l="undefined";return typeof o===l&&(o=e),typeof n===l&&(n={}),o[i[0]]||(o[i[0]]=1===i.length?n:{}),s=o[i[0]],i.length>1?r.makeNS(i.slice(1).join(a),n,o[i[0]]):s},bind:function(t,n,o){if(e.addEventListener)t.addEventListener(n,o,!1);else if(e.attachEvent){var s=function(){o.call(t,e.event)};t.attachEvent("on"+n,s)}else t["on"+n]=function(){o.call(t,e.event)}},unbind:function(e,t,n){null!==e&&(e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n),n=null)},rand:function(e,t){return e+Math.random()*(t-e)},randSign:function(){return Math.random()>.5?-1:1},getScreenSize:function(){var t=function(e,t,n){var o=e||0;return t&&(!o||o>t)&&(o=t),n&&(!o||o>n)?n:o};return{w:t(e.innerWidth||0,r.documentElement?r.documentElement.clientWidth:0,r.body?r.body.clientWidth:0),h:t(e.innerHeight||0,r.documentElement?r.documentElement.clientHeight:0,r.body?r.body.clientHeight:0)}},replaceAll:function(e,t,n,o){var s=new RegExp((n||"%")+"([A-z0-9-_]*)"+(o||"%"),"g");return e.replace(s,function(e,n){return t[n]||""})},checkpound:function(e){return"#"===e.charAt(0)?e.substr(1):e},getRandomColor:function(){return"#"+(16777215*Math.random()<<0).toString(16)},getGradientArray:function(e,t,n){var o,s,r,a,i,l,c,p,u,f,d,h=[];n+=1,e=this.checkpound(e),t=this.checkpound(t),o=this.hex2int(e),s=this.hex2int(t),n=Math.min(Math.abs(o-s),n),r={},f={},d={"+":function(e,t){return e===t?e:e+t},"-":function(e,t){return e===t?e:e-t}},a=this.hex2rgb(e),i=this.hex2rgb(t),l={r:0,g:0,b:0};for(c in l)l.hasOwnProperty(c)&&(r[c]=Math.abs(parseInt(a[c],10)-parseInt(i[c],10)),f[c]=r[c]/n);for(c=0;n>c;c+=1){for(p in l)l.hasOwnProperty(p)&&(u=parseInt(a[p],10)<parseInt(i[p],10)?"+":"-",l[p]=this.padme(this.int2hex(d[u](parseInt(a[p],10),f[p]*c)),0,"pre"));h[c]="#"+l.r+l.g+l.b}return h[n]="#"+t,h},padme:function(e,t,n,o){for(var s=o||2;String(e).length<s;)switch(n){case"pre":e=String(t+e);break;case"post":e=String(e+t)}return e},hex2int:function(e){return parseInt(e,16)},int2hex:function(e){return parseInt(e,10).toString(16)},rgb2hex:function(e,t,n){return e=parseInt(e,10).toString(16),t=parseInt(t,10).toString(16),n=parseInt(n,10).toString(16),e.length>1||(e="0"+e),t.length>1||(t="0"+t),n.length>1||(n="0"+n),"#"+e+t+n},hex2rgb:function(e){var t=String(e),n="#"===t.charAt(0)?1:0;return{r:parseInt(t.substr(n,2),16),g:parseInt(t.substr(n+2,2),16),b:parseInt(t.substr(n+4,2),16)}},killEvent:function(t){return t||(t=e.event,t.cancelBubble=!0,t.returnValue=!1),t.stopPropagation&&(t.stopPropagation(),t.preventDefault()),!1},pdistance:function(e,t,n,o){return Math.max(Math.abs(n-e),Math.abs(o-t))},out:function(t,n){e.console.debug(t,n)}},e.Wcave=s}(window);