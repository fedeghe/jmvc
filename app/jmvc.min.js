!function(W,undefined){"use strict";var WD=W.document,WDL=WD.location,i,j,l,JMVC=W.JMVC=function(){var e,t,n,r,o,a,i,c,s,u,l,p="3.0.1",f="0",d=!1,h={},m="/",y=WDL.protocol+m+m+"www.jmvc.dev",g=WDL.protocol+m+m+"www.jmvc.org",v={ext:m+"app"+m+"extensions"+m,test:m+"app"+m+"testsuite"+m,lang:m+"app"+m+"i18n"+m},C={controller:(d||"")+".js",model:d?".min.js":".js",view:".html","interface":".interface"+(d||"")+".js"},M=["html","htm","jsp","php","js","jmvc","j","mvc","do","asp"],J={controller:"index",action:"index"},b=["vendors/google/analytics","core/cookie"],V={},F="en",D=F,E=+new Date,w="undefined",x="ajax";return h={jeval:function(e){try{return JMVC.W.eval(e)}catch(t){}},inherit:function(e,t){var n=new Function;n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superClass=t.prototype,e.baseConstructor=t},multi_inherit:function(e,t){for(var n in e)h.inherit(e[n],t)},model_inherit:function(e){e.prototype.get=r.prototype.get,e.prototype.set=r.prototype.set,e.prototype.del=r.prototype.del,e.prototype.vars=r.prototype.vars,e.prototype.reset=r.prototype.reset,e.prototype.constructor=r.prototype.constructor},extend:function(t,n){var r=h.ns.make("JMVC."+t);if("function"==typeof n.initCheck){if(!n.initCheck.call(e))return!1;r.initCheck=null}!function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&e[n]===undefined&&(e[n]=t[n])}(r,n),"function"==typeof r.init&&(r.init.call(e),r.init=null)},hook_check:function(e,t){var n,r=t instanceof Array?t:!1;if(r&&e in V)for(n in V[e])r=V[e][n].apply(null,r),!(r instanceof Array)&&(r=[r]);return r},xhrget:function(t,r,a,i){var c,s=!1;return"view"===r&&"function"==typeof e.views[a]?s=e.views[a]:"model"===r&&"function"==typeof e.models[a]?(c=new e.models[a],i&&e.models[a].apply(c,i),c.vars={},s=c):e.io.get(t,function(t){switch(r){case"view":e.views[a]=new o(t),s=e.views[a];break;case"controller":h.jeval(t),h.inherit(e[r+"s"][a],n);break;case"model":h.jeval(t),h.model_inherit(e[r+"s"][a]),c=new e.models[a],i&&e.models[a].apply(c,i),c.vars={},s=c;break;case"interface":!(a in JMVC.interfaces)&&h.jeval(t)}},!1),s},factory_method:function(t,n,r){var o,a=n.split("/"),i=!1,c=e.vars.baseurl+m+"app"+m+t+"s/",s=t;return a.length>1&&(n=a.pop(),i=a.join(m)),"controller"===t&&(c+=e.c_prepath),c+=(i?i+m:"")+n,s=s.match(/(view|model|controller|interface)/),s&&s[0]===t?(c+=C[t],o=h.xhrget(c,t,n,r)):!1},render:function(t){var r,o;if(e.factory("controller",e.c),e.c in e.controllers){h.inherit(JMVC.controllers[JMVC.c],n),r=new JMVC.controllers[JMVC.c],JMVC.controllers[JMVC.c]=r,"jmvc_routes"in r&&(e.a=r.jmvc_routes[e.a]||e.a);for(o in e.p)e.p.hasOwnProperty(o)&&r.set(o,decodeURI(e.p[o]));"before"in r&&"function"==typeof r.before&&r.before(),"before_"+e.a in r&&"function"==typeof r["before_"+e.a]&&r["before_"+e.a](),"action_"+e.a in r&&"function"==typeof r["action_"+e.a]?r["action_"+e.a]():"action"in r&&"function"==typeof r.action?r.action(e.a,e.p):e.a.toLowerCase()!==J.action&&WDL.replace(m+"404"+m+"msg"+m+"act"+m+e.a),"after_"+e.a in r&&"function"==typeof r["after_"+e.a]&&r["after_"+e.a](),"after"in r&&"function"==typeof r.after&&r.after()}else e.c.toLowerCase()!==J.controller&&WDL.replace(m+"404"+m+"msg"+m+"cnt"+m+e.c);t&&"function"==typeof t&&t.call(e),e.loaded=!0},set:function(t,n){if(JMVC.util.isObject(t)){for(var r in t)e.set(r,t[r]);return e}return e.vars[t]=n,e},get:function(t){return e.vars[t]||undefined},del:function(t){return e.vars[t]&&(e.vars[t]=null),e},bind_old:function(e,t){return function(){return e.apply(t,arguments)}},delegate:function(t,n){var r=Array.prototype.slice.call(arguments,2);return function(){return t.apply(n||e,[].concat(r,Array.prototype.slice.call(arguments)))}},require:function(){var t,n,r,o,a=0,i=arguments.length,c="",s=JMVC.WD.getElementsByTagName("head").item(0);for(null;i>a;a+=1)if("string"==typeof arguments[a]&&!e.extensions[arguments[a]]){switch(n=arguments[a].split(m),r=n.length,c=n[r-1],t=JMVC.vars.baseurl+("testsuite"===arguments[a]?v.test:v.ext+arguments[a]+m)+c+(d||"")+".js",x){case"ajax":e.io.get(t,function(e){h.jeval(e)},!1);break;case"script":o=JMVC.WD.createElement("script"),o.src=t,s.appendChild(o)}e.extensions[arguments[a]]=arguments[a]}},implement:function(e,t){var n=0,r=t.length;for(null;r>n;n+=1)if(!(e.prototype&&t[n]in e.prototype&&"function"==typeof e.prototype[t[n]]||t[n]in e&&"function"==typeof e[t[n]]))return!1;return!0},globalize:function(e,t){JMVC.W[t]=e},lang:function(){for(var e=Array.prototype.slice.call(arguments,0),t=0,n=e.length;n>t;)JMVC.i18n[e[t]]||(JMVC.i18n[e[t]]=!0),t+=1},hook:function(t,n){var r=["onBeforeRender","onAfterRender","onBeforeParse","onAfterParse"],o=0;for(o in t)if(t.hasOwnProperty(o))try{if(!(e.array.inArray(r,o)>-1||n))throw{message:'EXCEPTION : You`re trying to hook unallowed function "'+o+'"'};V[o]instanceof Array||(V[o]=[]),V[o].push(t[o])}catch(a){W.alert(a.message)}},ns:{make:function(e,t,n){var r,o=".",a=e.split(o);return typeof n===w&&(n=W),typeof t===w&&(t={}),n[a[0]]||(n[a[0]]=1===a.length?t:{}),r=n[a[0]],a.length>1?h.ns.make(a.slice(1).join(o),t,n[a[0]]):r},check:function(e,t){var n=e.split(/\.|\//),r=0,o=n.length;for(t=t!==undefined?t:W,null;o>r;r+=1){if(!t[n[r]])return!1;t=t[n[r]]}return t}},purge:function(e){e={},e=null},prototipize:function j(e,t){var n,r,o=0;if(e instanceof Array)for(r=e.length;r>o;o+=1)j(e[o],t);for(n in t)t.hasOwnProperty(n)&&(e.prototype[n]=t[n])},debug:function(){var e=Array.prototype.slice.apply(arguments)||[];try{W.console.log.apply(W.console,e)}catch(t){try{W.opera.postError.apply(W.opera,e)}catch(n){W["log"in W?"log":"alert"](Array.prototype.join.call(e," "))}}},htmlspecialchars:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},htmlspecialchars_decode:function(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'")},each:function(e,t){var n,r,o,a;if(a={}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase(),t.$break=!1,t.$continue=!1,t["break"]=function(){t.$break=!0},t["continue"]=function(){t.$continue=!0},"array"===a)for(o=[],n=0,r=e.length,null;r>n;n++)if(t.$continue)t.$continue=!1;else{if(t.$break)break;o[n]=t.call(e,e[n],n)}else if("object"===a){o={};for(n in e)if(e.hasOwnProperty(n)){if(t.$continue){t.$continue=!1;continue}if(t.$break)break;!function(n){o[n]=t.call(e,e[n],n)}(n)}}else o=t(e);return o},promise:{create:function(){return new s},join:function(){},chain:function(){}},parselang:function(t){var n,r="\\[L\\[([\\S\\s]*?)\\]\\]",o=!0,a=1e5,i=e.cookie.get("lang")||F;for(JMVC.vars.currentlang=i,e.lang(JMVC.vars.currentlang),JMVC.i18n[JMVC.vars.currentlang]===!0&&e.io.get(JMVC.vars.baseurl+v.lang+JMVC.vars.currentlang+(d||"")+".js",function(e){h.jeval(e)},!1);a&&(o=new RegExp(r,"gm").exec(t),n="",o);)n=e.i18n[JMVC.vars.currentlang]&&e.i18n[JMVC.vars.currentlang][o[1]]?e.i18n[JMVC.vars.currentlang][o[1]]:o[1],t=t.replace(o[0],n),o=!!o,a-=1;return t}},l=function(e){W.setTimeout(function(){var t=new s,n=null,r=function(e){JMVC.dom.remove(e)};t.then(r),function(t){n=JMVC.dom.add(JMVC.dom.body(),"iframe",{src:e,width:1,height:1}),n.contentWindow.onload=function(){JMVC.debug("preloaded "+e),t.done(n)}}(t)},0)},u={Network:function(e){this.name="Network",this.msg=e||""},BadParams:function(e){this.name="BadParams",this.msg=e||""},BadName:function(e){this.name="BadName",this.msg=e||""},BadImplement:function(e){this.name="BadImplement",this.msg=e||""},ControllerNotFound:function(e){this.name="ControllerNotFound",this.msg=e||""},ActionNotFound:function(e){this.name="ActionNotFound",this.msg=e||""}},h.multi_inherit(u,Error),i={tpl:function(e){return e.match(/\<%/)?function(e){var t=new Function("obj","var p=[]; p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');  return p.join('');");return t(e)}(e):e},parse:function(t){var n,r,o,a,c,s,u,l,p,f=t,d={patt:"{{(.[^\\}]*)}}",pattpar:"\\s(.[A-z]*)=`(.[^/`]*)`",pattvar:"\\$(.[^\\$\\s}]*)\\$",viewname:"^(.[A-z_/]*)\\s"},m=0,y=100,g=!0;if(!t)return"";for(h.hook_check("onBeforeParse",[f]);y>m;)if(m+=1,n=new RegExp(d.patt,"gm").exec(f)){if(u=l=n[1],p=!1,new RegExp(d.pattpar,"gm").test(n[1]))for(p={},a=new RegExp(d.viewname).exec(n[1]),u=a[1],a=n[1];g;)o=new RegExp(d.pattpar,"gm").exec(a),o?(p[o[1]]=o[2],a=a.replace(" "+o[1]+"=`"+o[2]+"`","")):g=!1;if(r=e.views[u]?e.views[u]:e.factory("view",u),p!==!1)for(s in p)p.hasOwnProperty(s)&&r.set(s,p[s]);for(o=!0;o;)o=new RegExp(d.pattvar,"gm").exec(r.content),o&&(r.content=r.content.replace("$"+o[1]+"$",r.get(o[1])));f=f.replace("{{"+l+"}}",r.content)}else m=y;for(c in e.vars)e.vars.hasOwnProperty(c)&&(f=f.replace(new RegExp("\\$"+c+"\\$","g"),e.vars[c]));return f=i.tpl(f),h.hook_check("onAfterParse",[f]),f}},c=function(e){this.sender=e,this.listeners=[]},c.prototype={attach:function(e){this.listeners.push(e)},notify:function(e){var t,n;for(t=0,n=this.listeners.length;n>t;t+=1)this.listeners[t](this.sender,e)}},s=function(){this.cbacks=[],this.len=0,this.completed=!1,this.res=!1,this.err=!1,this.reset=function(){this.len=0,this.cbacks=[]}},s.prototype.done=function(e,t){var n=0;for(this.completed=!0,this.res=e,this.err=t,null;n<this.len;n+=1)this.cbacks[n](e,t);this.reset()},s.prototype.then=function(e,t){var n=h.delegate(e,t);return this.completed?n(this.res,this.err):(this.cbacks[this.len]=n,this.len+=1),this},a=function(e){this.mthds=e},a.prototype={addMethod:function(e){this.mthds[e.name]||(this.mthds[e.name]=e)},removeMethod:function(e){this.mthds[e]&&(this.mthds[e]=null)},check:function(e){var t,n=(this.mthds.length,new e);for(t in this.mthds)if("function"!=typeof n[this.mthds[t]])return!1;return n=null,!0}},n=function(){},n.prototype.vars={},n.prototype.jmvc_routes={},n.prototype.index=function(){W.alert("Default index action, write down a controller with an")},n.prototype.addRoutes=function(e,t){var n;if("string"==typeof e&&(this.jmvc_routes[e]=t),"object"==typeof e)for(n in e)e.hasOwnProperty(n)&&this.addRoutes(n,e[n])},n.prototype.relocate=function(e,t){W.setTimeout(function(){WDL.href=String(e)},~~(1*t)||0)},n.prototype.render=function(e,t){"function"==typeof e&&(t=e,e=!1);var n=new o(e);return n.render(t&&"function"==typeof t?{cback:t}:null),this},n.prototype.reset=function(){return this.vars={},this},r=function(){},r.prototype.vars={},r.prototype.reset=function(){return this.vars={},this},r.prototype.constructor="model",o=function(t){this.ocontent=t||"",this.content=t||"",this.vars={baseurl:e.vars.baseurl}},o.prototype.parse=function(t){var n;if(this.content){if(t)for(n in t.vars)t.vars.hasOwnProperty(n)&&(this.content=this.content.replace(new RegExp("\\$"+n+"\\$","g"),t.get(n)||""));for(n in e.vars)e.vars.hasOwnProperty(n)&&(this.content=this.content.replace(new RegExp("\\$"+n+"\\$","gm"),e.vars[n]||""))}return this},o.prototype.reset=function(){return this.content=this.ocontent,this.vars={},this},o.prototype.setFromUrl=function(e,t){return this.set(String(e),JMVC.controllers[JMVC.c].get(e)||t||"unset"),this},o.prototype.getFromUrl=function(e){return JMVC.controllers[JMVC.c].get(e)||!1},o.prototype.render=function(t){var n,r,o,a,c=t||{},s=c.cback||!1,u=c.argz||null,l=c.target||!1,p=this,f=this.content,d="\\$(.[^\\$\\s}]*)\\$";for("function"==typeof t&&(s=t),n=1;n;)n=new RegExp(d,"gm").exec(f),n&&(r=this.get(n[1])||"",f=f.replace("$"+n[1]+"$",r));return f=i.parse(f),this.content=f,e.loaded?(a=l?e.dom.find(l):!1,o=a||WD.body,e.dom.html(o,p.content),s&&s.apply(this,u?u:[])):e.events.bind(W,"load",function(){e.events.startRender(),e.loaded=!0,a=l?e.dom.find(l):!1,o=a||WD.body,e.vars.rendertime=+new Date-E,p.content=h.hook_check("onBeforeRender",[p.content])||p.content,e.dom.html(o,p.content),h.hook_check("onAfterRender",[p.content]),s&&s.apply(this,u||[]),e.events.endRender()}),this},o.prototype.get=r.prototype.get=n.prototype.get=function(e){return this.vars[e]?this.vars[e]:!1},o.prototype.set=r.prototype.set=n.prototype.set=function(e,t,n){var r;switch(typeof e){case"string":(!this.vars[e]||n)&&(this.vars[e]=t);break;case"object":for(r in e)e.hasOwnProperty(r)&&(!this.vars[r]||t||n)&&(this.vars[r]=e[r])}return this},o.prototype.del=r.prototype.del=n.prototype.del=function(e){return this.vars[e]&&(this.vars[e]=null),this},o.prototype.clone=function(t){var n=!1;return"undefined"!=typeof t?(e.views[t]=new o(this.ocontent),n=e.views[t]):n=new o(this.ocontest),n},t=function(){var e,t,n,r={url:WDL.protocol+m+m+WDL.hostname+WDL.pathname+WDL.search,proto:WDL.protocol,host:WDL.hostname,path:WDL.pathname,search:WDL.search,hash:WDL.hash.substr(1),port:WDL.port?":"+WDL.port:""},o=r.path.replace(new RegExp("\\."+M.join("|\\."),"gm"),"").substr(1).split(m),a=!1,i="",c=[],s=!1,u={},l=0,p=WDL.protocol+m+m+WDL.hostname;for(o[0].match(/test_/)&&b.push("testsuite"),"localhost"===WDL.hostname&&o.shift(),a=o.shift()||J.controller,a.match(/_/)&&(c=a.split("_"),a=c.pop(),i=c.join(m)+m),s=o.shift()||J.action,l=o.length,n=0;l>n+1;n+=2)u[o[n]]=o[n+1];if(""!==r.search)for(o=r.search.substr(1).split("&"),n=0,l=o.length;l>n;n+=1)e=o[n].split("="),u[e[0]]||(u[e[0]]=e[1]);return t={controller:a.replace(/\//g,""),controller_prepath:i,action:s.replace(/\//g,""),params:u,baseurl:p,port:r.port,search:r.search,hash:r.hash}}(),e={loaded:!1,W:W,WD:WD,WDL:WDL,US:m,M:Math,c_prepath:t.controller_prepath,c:t.controller||J.controller,a:t.action||J.action,p:t.params||{},hash:t.hash,controllers:{},models:{},views:{},interfaces:{},vars:{baseurl:t.baseurl+t.port,extensions:t.baseurl+t.port+v.ext,devurl:y,produrl:g,version:p,review:f,last_modified:WD.lastModified,rendertime:0,retina:W.devicePixelRatio>1,randcolor:new function(){var e=["00","33","66","99","CC","FF"];this.toString=function(){return"#"+e[JMVC.util.rand(0,5)]+e[JMVC.util.rand(0,5)]+e[JMVC.util.rand(0,5)]}},currentlang:D},widget:{},extensions:{},extensions_params:{},i18n:{},modules:b,nsCheck:h.ns.check,nsMake:h.ns.make,Event:c,Errors:u,Interface:a,promise:h.promise,parselang:h.parselang,hookCheck:h.hook_check,debug:h.debug,delegate:h.delegate,extend:h.extend,factory:h.factory_method,inherit:h.inherit,multinherit:h.multi_inherit,preload:l,hook:h.hook,hooks:V,jeval:h.jeval,prototipize:h.prototipize,purge:h.purge,parse:i.parse,render:h.render,require:h.require,lang:h.lang,set:h.set,get:h.get,del:h.del,htmlspecialchars:h.htmlspecialchars,htmlspecialchars_decode:h.htmlspecialchars_decode,gc:function(){var e=0,t=arguments,n=t.length;for(null;n>e;e+=1)t[e]=null},getView:function(e){return h.factory_method("view",e)},getModel:function(e,t){return h.factory_method("model",e,t)},loadInterfaces:function(e,t){return h.factory_method("interface",e,t)},implement:h.implement,each:h.each,console:function(){"core/console"in e.extensions||e.require("core/console"),JMVC.console.toggle()},xdoc:function(t){if("elements"in JMVC.xdoc||(JMVC.xdoc.elements={}),!("core/xdoc"in e.extensions)&&e.require("core/xdoc"),!(t in JMVC.xdoc.elements))try{JMVC.io.ajcall(JMVC.vars.baseurl+"/app/extensions/"+t+"/xdoc.xml",{method:"GET",type:"xml",cback:function(e){JMVC.xdoc.elements[t]=e,console.debug("doc : "+e)},error:function(){alert("errore")}})}catch(n){}JMVC.xdoc.toggle(t)},loading:function(e,t){try{document.getElementById("JMVCisloading").style.display="block",document.getElementById("JMVCloading").style.width=~~e+"%",t&&(document.getElementById("JMVCloadingmessage").innerHTML=t)}catch(n){}}},e.gc(y,g,M,p,f,t,n,r,o,c,b,J,E),e}();if(JMVC.ajax={count:0,types:{xml:"text/xml",html:"text/html",json:"application/json"},getReq:function(){var e,t=["Msxml2.XMLHTTP","Msxml3.XMLHTTP","Microsoft.XMLHTTP"],n=0,r=t.length;try{e=new W.XMLHttpRequest}catch(o){for(null;r>n;n+=1)try{e=new ActiveXObject(t[n])}catch(a){continue}!e&&JMVC.debug("No way to initialize hxr")}return JMVC.gc(t,n,r),JMVC.ajax.count+=1,e},call:function(e){var t={req:JMVC.ajax.getReq(),uri:e&&e.uri,method:e&&"method"in e?e.method:"POST",cback:e&&"cback"in e?e.cback:function(){},cb_opened:e&&"opened"in e?e.opened:function(){},cb_loading:e&&"loading"in e?e.loading:function(){},cb_error:e&&"error"in e?e.error:function(){},cb_abort:e&&"abort"in e?e.abort:function(){},sync:e&&e.sync,data:e&&e.data||!1,type:e&&e.type||JMVC.ajax.types.html,cache:e&&e.cache!==undefined?e.cache:!0,targetType:"xml"===e.type?"responseXML":"responseText",timeout:e&&e.timeout||3e3,complete:!1,res:!1,ret:!1,state:!1};t.req.onerror=function(){t.cb_error&&t.cb_error.apply(null,arguments)},t.req.onabort=function(){t.cb_abort&&t.cb_abort.apply(null,arguments)},t.req.onreadystatechange=function(){if(1==t.req.readyState)switch(t.method){case"POST":try{t.req.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.req.send(t.data||!0)}catch(e){}break;case"GET":try{t.req.setRequestHeader("Accept",JMVC.ajax.types[t.type]+"; charset=utf-8"),t.req.send(null)}catch(n){}}else if(2==t.req.readyState)console.debug("2");else if(3==t.req.readyState)console.debug("3");else if(4==t.req.readyState)return 200!==t.req.status?(t.req.onerror(),t.complete=!0,void 0):(t.complete=!0,t.ret="json"==t.type?new Function("return "+t.req[t.targetType])():t.req[t.targetType],t.cback&&function(e){t.cback(e)}(t.ret),W.setTimeout(function(){JMVC.ajax.count-=1,JMVC.purge(t.req)},50),t.ret)},t.req.open(t.method,"GET"===t.method?t.uri+(t.data?"?"+t.data:""):t.uri,t.sync)},post:function(){},get:function(){},getJson:function(){},getXML:function(){}},JMVC.io={xhrcount:0,getxhr:function(){JMVC.io.xhrcount+=1;var e,t=["Msxml2.XMLHTTP","Msxml3.XMLHTTP","Microsoft.XMLHTTP"],n=0,r=t.length;try{e=new W.XMLHttpRequest}catch(o){for(null;r>n;n+=1)try{e=new ActiveXObject(t[n])}catch(a){continue}e||JMVC.debug("No way to initialize hxr")}return JMVC.gc(t,n,r),e},ajcall:function(e,t){var n=JMVC.io.getxhr(),r=t&&t.method||"POST",o=t&&t.cback,a=t&&t.opened||function(){},i=t&&t.loading||function(){},c=t&&t.error||function(){},s=t&&t.abort||function(){},u=t&&t.sync,l=t&&t.data||{},p=t&&t.type||"text/html",f=t&&t.cache!==undefined?t.cache:!0,d="xml"===p?"responseXML":"responseText",h=t&&t.timeout||3e3,m=!1,y=!1,g=!1,v=!1;f||(l.C=JMVC.util.now()),l=JMVC.object.obj2qs(l).substr(1),n.onreadystatechange=function(){var e;if(v===n.readyState)return!1;if(v=n.readyState,"complete"===n.readyState||4===n.readyState&&200===n.status)return m=!0,o&&(y=n[d],function(){o(y)}(y)),g=n[d],W.setTimeout(function(){JMVC.io.xhrcount-=1},50),g;if(3===n.readyState)i(n);else if(2===n.readyState)a(n);else if(1===n.readyState)switch(r){case"POST":try{n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(l||!0)}catch(t){}break;case"GET":try{e={xml:"text/xml",html:"text/html",json:"application/json"}[p],n.setRequestHeader("Accept",e+"; charset=utf-8"),n.send(null)}catch(c){}}},n.onerror=function(){c&&c.apply(null,arguments)},n.onabort=function(){s&&s.apply(null,arguments)},n.open(r,"GET"===r?e+(l?"?"+l:""):e,u),W.setTimeout(function(){m||(m=!0,n.abort())},h);try{return"responseXML"===d?n[d].childNodes[0]:n[d]}catch(C){}},post:function(e,t,n,r,o){return JMVC.io.ajcall(e,{cback:t,method:"POST",sync:n,data:r,cache:o})},get:function(e,t,n,r,o,a){return JMVC.io.ajcall(e,{cback:t,method:"GET",sync:n,data:r,cache:o,error:a})},getJson:function(e,t,n){var r=JMVC.io.ajcall(e,{type:"json",method:"GET",sync:!1,cback:t,data:n});return W.JSON&&W.JSON.parse?JSON.parse(r):JMVC.jeval("("+r+")")},getXML:function(e,t){return JMVC.io.ajcall(e,{method:"GET",sync:!1,type:"xml",cback:t||function(){}})}},JMVC.util={deg2rad:function(e){return JMVC.M.PI*e/180},extend:function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},getParameters:function(scriptid,pname){var script=JMVC.dom.find("#"+scriptid),p=!1,parameters=!1;return pname=pname||"data-params",p=script.getAttribute(pname),parameters=p?eval("("+p+")"):{}},getType:function(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},hex2int:function(e){return parseInt(e,16)},int2hex:function(e){return parseInt(e,10).toString(16)},isArray:function(e){var t,n,r=Array.isArray&&Array.isArray(e);return r?!0:(t=String(e)!==e,n={}.toString.call(e).match(/\[object\sArray\]/),t&&!(!n||!n.length))},isObject:function(e){var t=String(e)!==e,n={}.toString.call(e).match(/\[object\sObject\]/);return t&&!(!n||!n.length)},isSet:function(e){return"undefined"!=typeof e},isTypeOf:function(e,t){return typeof e===t},now:function(){return+new Date},rand:function(e,t){return e+~~(JMVC.M.random()*(t-e+1))},rad2deg:function(e){return 180*e/JMVC.M.PI},range:function(e,t){for(var n=[];t-e+1;)n.push((e+=1)-1);return n},uniqueid:new function(){var e=0;this.toString=function(){return"JMVCID"+ ++e}}},JMVC.dom={add:function(e,t,n,r){var o=this.create(t,n,r);return this.append(e,o),o},addClass:function(e,t){var n=e.className?e.className.split(" "):[];JMVC.array.inArray(n,t)<0&&(n.push(t),e.className=n.join(" "))},append:function(e,t){if(JMVC.util.isArray(t))for(var n=0,r=t.length;r>n;n++)e.appendChild(t[n]);else e.appendChild(t);return e},attr:function(e,t,n){var r,o=!1,a=!1,i=0,c=!1;try{e.nodeType}catch(s){return!1}if(3===e.nodeType||8===e.nodeType)return"undefined";if(c=JMVC.util.isObject(t),c&&e.setAttribute){for(i in t)e.setAttribute(i,t[i]);return!0}if(!t||t.constructor!==String)return"";if("undefined"!=typeof n)e[{"for":"htmlFor","class":"className"}[t]||t]=n,e.setAttribute&&e.setAttribute(t,n);else{if(r=e.getAttribute&&e.getAttribute(t)||0,!r)for(o=e.attributes,a=o.length,i=0;a>i;i+=1)if(o[i].nodeName===t)return o[i].value;e=r}return e},body:function(){return WD.body},childs:function(e){return e.childNodes},clone:function(e,t){return e.cloneNode(!!t)},create:function(e,t,n){if(!e)return W.alert("no tag"),void 0;var r,o=JMVC.WD.createElement(e);t=t||{};for(r in t)t.hasOwnProperty(r)&&o.setAttribute(String(r),String(t[r]));return"undefined"!=typeof n&&(1===n.nodeType?this.append(o,n):this.html(o,n)),o},createText:function(e){return JMVC.WD.createTextNode(e)},createNS:function(e,t){return JMVC.WD.createElementNS(e,t)},empty:function(e){e.innerHTML=""},find:function(e,t){if(1===e.nodeType)return e;var n="getElement",r=!1,o=!1;switch(e=e.match(/^(\W)?([A-z0-9-_]*)/),e[1]||"="){case"#":n+="ById";break;case".":n+="sByClassName",r=!0;break;case"@":n+="sByName",r=!0;break;case"=":n+="sByTagName",r=!0;break;default:return[]}return o=(t||JMVC.WD)[n](e[2]),o=r?JMVC.array.coll2array(o):o,o instanceof Array&&1==o.length?o[0]:o},find2:function(e,t){if(1===e.nodeType)return e;var n="getElement",r=0,o=0;return e=e.match(/^(\W)?([A-z0-9-_]*)/),e[1]=e[1]||"=",r="#"!==e[1],o=(t||JMVC.WD)[n+{"#":"ById",".":"ByClassName","@":"sByName","=":"sByTagName"}[e[1]]](e[2]),o=r?JMVC.array.coll2array(o):o,o instanceof Array?1==o.length?o[0]:o:o},findInnerByClass:function(e,t){var n=[],r=new RegExp("\\b"+t+"\\b"),o=e.getElementsByTagName("*"),a=0,i=o.length;for(null;i>a;a+=1)r.test(o[a].className)&&n.push(o[a]);return n},findByAttribute:function(e,t,n){var r,o=[],a=[],i=t==undefined,c=n instanceof Array;n=c?n:n||JMVC.WD.body,a=c?n:n.all?n.all:n.getElementsByTagName("*");for(var s=a.length;s--;)r=a[s].getAttribute(e),"string"!=typeof r||!i&&r!=t||o.push(a[s]);return o},firstAncestor:function(e,t){for(;e=e.parentNode,e&&e.tagName!=t.toUpperCase(););return e},hasAttribute:function(e,t){return null!==e.getAttribute(t)},hasClass:function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},html:function(e,t){if(!e)return this;var n="";if("undefined"!=typeof t){if(e)try{JMVC.dom.isElement(t)?(JMVC.dom.empty(e),JMVC.dom.append(e,t)):e.innerHTML=t+""}catch(r){}return this}return n=1===e.nodeType?e.innerHTML:e,JMVC.purge(e),n.trim()},insertAfter:function(e,t){var n=t.parentNode;return n.insertBefore(e,t.nextSibling),e},insertBefore:function(e,t){var n=t.parentNode;return n.insertBefore(e,t),e},isElement:function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},isNode:function(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},nodeTypeString:function(e){var t=["ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE"];return t[e.nodeType-1]},nthchild:function(e,t,n){for(var r=e.childNodes,o=[],a=r.length,i=0,c=n||["TEXT_NODE"];a;)JMVC.array.inArray(c,this.nodeTypeString(r[i]))&&(o.push(r[i]),i+=1),a-=1;return a=o.length,a>t?o[t]:!1},preloadImage:function(e,t){var n=new W.Image;return"function"==typeof t&&(n.onload=t(n)),n.src=e,n},parent:function(e){return e.parentNode},prepend:function(e,t){var n=e.childNodes[0];return e.insertBefore(t,n),t},remove:function(e){if(e){var t;if("string"==typeof e&&(e=JMVC.dom.find(e)),!JMVC.util.isArray(e))return t=e.parentNode,t.removeChild(e),t;for(var n=0,r=e.length;r>n;n++)JMVC.dom.remove(e[n])}},removeAttribute:function(e,t){return e.removeAttribute(t),e},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");return e.className=e.className.replace(n," "),this},switchClass:function(e,t,n){return this.hasClass(e,t)&&(this.removeClass(e,t),this.hasClass(e,n)||this.addClass(e,n)),e},val:function(e){return e.value}},JMVC.events={bindings:{},onedone:!1,Estart:[],Eend:[],bind:function(e,t,n){if(e instanceof Array)for(var r=0,o=e.length;o>r;r++)JMVC.events.bind(e[r],t,n);else{var a=function(t){n.call(e,t||W.event)};W.addEventListener?e.addEventListener(t,n,!1):W.attachEvent?e.attachEvent("on"+t,a):e["on"+t]=a,JMVC.events.bindings[e]||(JMVC.events.bindings[e]={}),JMVC.events.bindings[e][t]=n}},unbind:function(e,t){null!==e&&(e.removeEventListener?e.removeEventListener(t,JMVC.events.bindings[e][t],!1):e.detachEvent&&e.detachEvent("on"+t,JMVC.events.bindings[e][t]),JMVC.events.bindings[e][t]=null)},one:function(e,t,n){if(e instanceof Array)for(var r=0,o=e.length;o>r;r++)JMVC.events.one(e[r],t,n);else{var a=function(e){this.onedone||n(e),this.onedone=!0};JMVC.events.bind(e,t,a)}},kill:function(e){return e||(e=W.event,e.cancelBubble=!0,e.returnValue=!1),e.stopPropagation&&(e.stopPropagation(),e.preventDefault()),!1},ready:function(e){if(JMVC.loaded)return e.call(),void 0;var t=null;return WD.addEventListener?t=WD.addEventListener("DOMContentLoaded",e,!1):W.addEventListener?t=W.addEventListener("load",e,!1):WD.attachEvent?t=WD.attachEvent("onreadystatechange",e):W.attachEvent&&(t=W.attachEvent("onload",e)),t},preventDefault:function(e){e=e||W.event,e.preventDefault?e.preventDefault():e.returnValue=!1},eventTarget:function(e){e=e?e:JMVC.W.event;var t=e.currentTarget||"undefined"!=typeof e.target?e.target:e.srcElement;if(!t)return!1;for(;3==t.nodeType&&null!=t.parentNode;)t=t.parentNode;return t},getCoord:function(e,t){var n,r;return t.pageX||t.pageY?(n=t.pageX,r=t.pageY):(n=t.clientX+JMVC.WD.body.scrollLeft+JMVC.WD.documentElement.scrollLeft,r=t.clientY+JMVC.WD.body.scrollTop+JMVC.WD.documentElement.scrollTop),n-=e.offsetLeft,r-=e.offsetTop,[n,r]},start:function(e){this.Estart.push(e)},end:function(e){this.Eend.push(e)},startRender:function(){var e=0,t=this.Estart.length;for(null;t>e;e+=1)this.Estart[e]()},endRender:function(){var e=0,t=this.Eend.length;for(null;t>e;e+=1)this.Eend[e]()},delay:function(e,t){W.setTimeout(e,t)},scrollBy:function(e,t){JMVC.events.delay(function(){W.scrollBy(e,t)},1)},scrollTo:function(e,t){JMVC.events.delay(function(){W.scrollTo(e,t)},1)},loadify:function(e){JMVC.events.start(function(){JMVC.events.delay(function(){WD.body.style.opacity=0,WD.body.style.filter="alpha(opacity=0)"},0)}),JMVC.events.end(function(){for(var t,n=0,r=.05,o=1;o>=n;)t=W.setTimeout(function(e){WD.body.style.opacity=e,WD.body.style.filter="alpha(opacity="+100*e+")",e>o&&(WD.body.style.opacity=1,WD.body.style.filter="alpha(opacity=100)")},e*n,n+r),n+=r})},touch:function(e){var t=[],n=0,r=e.touches,o=r.length;for(null;o>n;n+=1)t.push({x:r[n].pageX,y:r[n].pageY});return t}},JMVC.head={element:WD.getElementsByTagName("head").item(0),addscript:function(e,t,n){var r,o,a,i,c=this,s=!0,u=!0;t?n?(i=JMVC.parse(e,!0),r=JMVC.dom.create("script",{type:"text/javascript",defer:"defer"},i),o=c.element,o.appendChild(r)):a=JMVC.io.get(e,function(e){e=JMVC.parse(e,!0),r=JMVC.dom.create("script",{type:"text/javascript",defer:"defer"},e),o=c.element,o.appendChild(r)},s,u):(r=n?JMVC.dom.create("script",{type:"text/javascript",defer:"defer"},e):JMVC.dom.create("script",{type:"text/javascript",defer:"defer",src:e}," "),o=this.element,o.appendChild(r))},addstyle:function(e,t,n,r){var o,a,i,c,s,u=this,l=!0,p=!1;return t?n?(s=JMVC.parse(e,!0),a=u.element,o=WD.createElement("style"),c=WD.createTextNode(String(s)),o.type="text/css",o.styleSheet?o.styleSheet.cssText=c.value:o.appendChild(c),r&&(o.id=r),a.appendChild(o)):i=JMVC.io.get(e,function(e){e=JMVC.parse(e,!0),a=u.element,o=WD.createElement("style"),c=WD.createTextNode(String(e)),o.type="text/css",o.styleSheet?o.styleSheet.cssText=c.value||c.nodeValue:o.appendChild(c),r&&(o.id=r),a.appendChild(o)},l,p):(o=JMVC.dom.create("link",{type:"text/css",rel:"stylesheet",href:e}),a=this.element,a.appendChild(o)),o},denyiXrame:function(){return W.top!==W.self&&(W.top.location=JMVC.vars.baseurl)},favicon:function(e){JMVC.head.link("icon",{rel:"shortcut icon",href:JMVC.vars.baseurl+e})},"goto":function(e,t,n){var r=[];e&&r.push(e),t&&r.push(t),n&&r.push(n),WD.location.href=JMVC.vars.baseurl+JMVC.US+r.join(JMVC.US)},lastmodified:function(e){var t=this.element.getElementsByTagName("meta"),n=JMVC.dom.create("meta",{"http-equiv":"last-modified",content:(e||JMVC.vars.last_modified||new Date).toString()}),r=t.length;r?JMVC.dom.insertAfter(n,t.item(r-1)):this.element.appendChild(n)},lib:function(e){var t={jquery:"http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js",jsapi:"https://www.google.com/jsapi"};e in t&&JMVC.head.addscript(t[e])},link:function(e,t){t.rel=e,JMVC.dom.add(JMVC.head.element,"link",t)},meta:function(e,t,n){n=!!n;var r=this.metas(),o=JMVC.dom.findByAttribute("name",e,r),a=o.length;if(!n&&a)return!1;n&&a&&JMVC.dom.remove(o[0]);var i=this.element.getElementsByTagName("meta"),c=JMVC.dom.create("meta",{name:e,content:t}),s=i.length;s?JMVC.dom.insertAfter(c,i.item(s-1)):this.element.appendChild(c)},metas:function(){return JMVC.array.coll2array(JMVC.WD.getElementsByTagName("meta"))},reload:function(){var e=JMVC.WD.location.href;WD.location.href=e},title:function(e){return e?(WD.title=e,!0):WD.title}},JMVC.array={arrayClone:function(e){return e.concat()},coll2array:function(e){var t=[],n=0;for(null;e[n];t[n]=e[n++]);return t},inArray:function(e,t){var n=e.length;for(null;n--&&e[n]!==t;null);return n},inArrayRich:function(e,t){var n=0,r=!1,o=e.length;for(null;o>n;n+=1)if(r={}.toString.call(e[n]).match(/\[object\s(Array|Object)\]/),r&&JSON.stringify(e[n])===JSON.stringify(t)||!r&&e[n].toString()===t.toString())return n;return-1}},JMVC.string={code2str:function(e){return String.fromCharCode.apply(null,e)},htmlEntities:function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&(?![\w\#]+;)/g,"&amp;")},ltrim:function(e){return e.replace(/^\s+/g,"")},multireplace:function(e,t,n){for(n in t)e=e.replace(t[n],n);return e},padme:function(e,t,n,r){for(r=r||2;String(e).length<r;)switch(n){case"pre":e=String(t+e);break;case"post":e=String(e+t)}return e},replaceall:function(e,t,n,r,o){n||(n="%"),r||(r="%");var a=new RegExp(n+"([A-z0-9-_]*)"+r,"g");return e.replace(a,function(e,a){return("function"==typeof t?t(a):t[a])||o||n+a+r})},rtrim:function(e){return e.replace(/\s+$/g,"")},str2code:function(e){for(var t=[],n=0,r=e.length;r>n;)t.push(e.charCodeAt(n)),++n;return t},strRepeat:function(e,t){for(var n=[];t-=1;)n.push(e.replace(/\%n\%/g,t));return n.reverse().join("")},trim:function(e){return e.replace(/^\s+|\s+$/g,"")}},JMVC.object={clone:function(e){var t,n;if(null===e||"object"!=typeof e)return e;t=e.constructor();
for(n in e)e.hasOwnProperty(n)&&(t[n]=this.clone(e[n]));return t},objCompare:function(e,t,n,r){if(n==undefined&&(n=!0),!n)return 0;if(e+""!=t+"")return!1;for(r in e)if(n=n&&t[r]&&JMVC.object.objCompare(e[r],t[r],n),!n)return!1;for(r in t)if(n=n&&e[r]&&JMVC.object.objCompare(t[r],e[r],n),!n)return!1;return n},objJCompare:function(e,t){return JSON.stringify(e)===JSON.stringify(t)},inObject:function(e,t){return"object"==typeof e&&e[t]},obj2attr:function(e){var t,n="";for(t in e)e.hasOwnProperty(t)&&(n+=" "+t+(e[t]?'="'+e[t]+'"':""));return n},obj2css:function(e){var t,n,r="";for(t in e)if(e.hasOwnProperty(t)){r+=t+"{";for(n in e[t])e[t].hasOwnProperty(n)&&(r+=n+":"+e[t][n]+";");r+="} "}return r},obj2qs:function(e){var t,n="";for(t in e)e.hasOwnProperty(t)&&(n+=String((n?"&":"?")+t+"="+encodeURIComponent(e[t])));return n}},JMVC.match={email:function(e){return!!e.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},url:function(e){return/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)}},JMVC.num={getNum:function(e){return parseInt(e,10)},getFloat:function(e){return parseFloat(e,10)},pFloat:function(e){return 1*e},pInt:function(e){return e>>0},mRound:function(e){return e+.5>>0},mFloor:function(e){},mCeil:function(e){return e+(e>0&&!!(e%1))>>0},num:function(e){return parseFloat(e.toFixed(10),10)}},l=JMVC.modules.length)for(i=0;l>i;)JMVC.require(JMVC.modules[i]),i+=1;JMVC.p.lang&&JMVC.cookie.set("lang",JMVC.p.lang),JMVC.render()}(this),JMVC.W.onerror=function(e,t,n){JMVC.debug("Uncaught error "+e+" in "+t+", lines "+n)};