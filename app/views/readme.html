   _  __  __ __     __ ____ 
  (_)|  \/  |\ \   / //  __|
  | || |\/| | \ \ / / | |    
  | || |  | |  \ v /  | |__ 
 _/ ||_|  |_|   \_/   \____|
|__/                      

Description: jmvc module

Author: Federico Ghedina
Version: 0.1
Date : 26-01-2012


<b>Installation</b>
------------
Thanks to a basic .htaccess jmcv access point is an index.html which loads in the head the main script
and is meant to have empty body, in fact the whole body will be rewritten (see index.html)
NOTE: the src attribute of the script must be the absolute url for jmvc.js
All you have to do is, write controllers, models and views.


<b>Features</b>
--------
$fr$ cross-browser
$fr$ no global variables so no collisions are possible
$fr$ url dispatching
$fr$ load views and models (synchronous ajax requests, otherwise model eval is late) from a controller
$fr$ default controller and action (inherited 'index')
$fr$ each view, model or controller has his own hash as private registry to contain variables.
$fr$ in views you can write special variable placeholders for other views or for view's variable:
	>	<b>&#36;variable_name&#36;</b> for variable
	>	<b>&#123;&#123;my_view&#125;&#125;</b> for a view
	>	<b>&#123;&#123;my_view name=`Federico` surname=`Ghedina`&#125;&#125;</b>
	these will be replaced with the element content (recusively parsed, within 10 nesting level)
$fr$ dinamically load other scripts and stylesheets 
$fr$ the content produced by default affects the content of the body, but You can choose to affect
	the content of a node with an ID attribute.
	You can edit the head with some limitations using JMVC.head methods (or your scripts)
$fr$ 7.1Kb (packed)
$fr$ total warranty for completely seo <b>un</b>friendly pages
$fr$ automatic extra parameters from url
$fr$ automatic extra parameters from querystring
$fr$ add action routes in the controller (see test controller)
$fr$ easily extend the inner main object with your code (see trial extension)



<b>Url structure</b>
-------------
Supposing we're using virtual host http://www.jmvc.dev , a location will be 

something like: http://www.jsbase.dev / controller / action / var1/val1/var2/val2/var3 ? var4=Fred&var5=notme&var1=foo
                '-------------------'   '--------'   '----'   '----------------------'   '---------------------------'
                         A                   A          A                A                            A
> proto+domain ----------'                   |          |                |                            |
                                             |          |                |                            |
> controller -------------------------------'           |                |                            |
                                                        |                |                            |
> action ----------------------------------------------'                 |                            |
                                                                         |                            |
> parameters -----------------------------------------------------------'                             |
                                                                                                      |
> get params (do not override previous) -------------------------------------------------------------'


NOTE: parameters are meant to be even, in the controller You will be able
      to access and use 2 variables: var1="val1" and var2="val2"; the third
      one will be ignored because unvalued.

<b>Try it</b>
------
The fastest way to try it out is to create a virtual host or put it online (ex: http://www.jmvc.dev)



<b>API</b>
===


<b>Controller</b>
----------

<table>
	<caption style="text-align:left;font-weight:bold">set(String varname,	Mixed value)</caption>
	<tr>
		<td>Description</td><td>Add a variable to the Controller registry.</td>
	</tr>
	<tr valign="top">
		<td>Parameters</td><td>varname > the name of the variable<br />value > the value for the variable</td>
	</tr>
	<tr>
		<td>Returns</td><td>the controller instance</td>
	</tr>	
</table>




<b>get(String varname)</b>
Description	: If exists retrieve a variable from the Controller registry.
Parameters	: varname > the name of the variable needed
Returns		: the variable value if exists or false

<b>del(String varname)</b>
Description	: If exists deletes a variable from the Controller registry.
Parameters	: varname > the name of the variable to be deleted
Returns		: void (undefined)

<b>relocate(uri location)</b>
Description	: Redirects to a specified location.
Parameters	: uri > the location to be redirected to
Returns		: void (undefined)

<b>render(String content, Javascript function callback)</b>
Description	: Renders directly something from the controller, optionally invokes a callback at the end.
Parameters	: content > the content to render
			  callback : a function that will be invoked after content is set
Returns		: the Controller instance



<b>View</b>
----
<b>set(String varname, Mixed value)</b>
Description	: Add a variable to the View registry.
Parameters	: varname > the name of the variable
			  value > the value for the variable
Returns		: the View instance

<b>get(String varname)</b>
Description	: If exists retrieve a variable from the View registry.
Parameters	: varname > the name of the variable needed
Returns		: the variable value if exists or false

<b>del(String varname)</b>
Description	: If exists deletes a variable from the View registry.
Parameters	: varname > the name of the variable to be deleted
Returns		: void (undefined)



>>> parse(Model object);
If the view has some $var$ placeholders within and these
variables are stored in a model instance with the right
names, that method get values from model instance and uses
them in the placeholders content substitution.

>>> render( {
	cback : Javascript function,
	argz : callback array parameters,
	target : dom node id attribute (default document.body)
});
This is the function intended to be used to render the document
or a part of it. You can optionally pass three elements within
a literal object:
cback : a callback function that will be executed after rendereing
argz : an array of parameters that wil be used with the callback
target : the default target is the document.body but if you pass a
	string containing the id attribute of an element that is in the
	DOM (set from previous render with the default target) the content
	will be set in that element.



<b>Model</b>
-----
<b>set(String varname, Mixed value)</b>
Description	: Add a variable to the Model registry.
Parameters	: varname > the name of the variable
			  value > the value for the variable
Returns		: the model instance

<b>get(String varname)</b>
Description	: If exists retrieve a variable from the Model registry.
Parameters	: varname > the name of the variable needed
Returns		: the variable value if exists or false


<b>del(String varname)</b>
Description	: If exists deletes a variable from the Model registry.
Parameters	: varname > the name of the variable to be deleted
Returns		: void (undefined)



<b>JMVC utility library</b>
--------------------
<b>JMVC.dom.append(where, what)</b> :
Description	: append an element inside another one
Params		: dom element target, dom element to append
Returns		: void

<b>JMVC.dom.create(tag, attrs, inner)</b>:
Description	: try to create an html element
Params		: tag string to be created, attrs literal for attributes, inner html content
Returns		: the brand new tag

<b>JMVC.dom.add(where, tag, attrs, inner)</b>: 
Description	: this is a shortcut that merges the previous two

<b>JMVC.dom.html(el, html)</b>
Description	: sets or returns the html into an existing element
Params		: el element target, html to set in target, otherwise gets it
Returns		: html if used as getter on nonempty nodes
